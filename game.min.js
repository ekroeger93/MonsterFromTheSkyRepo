/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Object.defineProperty(Array.prototype,'erase',{value:function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;}});Object.defineProperty(Array.prototype,'random',{value:function(item){return this[Math.floor(Math.random()*this.length)];}});Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.24',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,perfMod:false,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el[''+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el[''+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(ig.perfMod===false){if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate,element);callback();};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}}else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/image.js
ig.baked=true;ig.module('impact.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/font.js
ig.baked=true;ig.module('impact.font').requires('impact.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,scaleFont:1,startChar:{x:0,y:0},onload:function(ev){this._loadMetrics(this.data);this.parent(ev);},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar]+this.letterSpacing;}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);if(i==0)
{this.startChar.x=ig.system.getDrawPos(x);this.startChar.y=ig.system.getDrawPos(y);}}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=(this.height-2)*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,this.startChar.x+((ig.system.getDrawPos(targetX)-this.startChar.x)*this.scaleFont),ig.system.getDrawPos(targetY),charWidth*this.scaleFont,charHeight*this.scaleFont);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.height=image.height-1;this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentChar=0;var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]<128&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentChar++;currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/sound.js
ig.baked=true;ig.module('impact.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}
if(ig.Sound.enabled&&ig.Sound.useWebAudio){this.audioContext=new AudioContext();this.boundWebAudioUnlock=this.unlockWebAudio.bind(this);document.addEventListener('touchstart',this.boundWebAudioUnlock,false);}},unlockWebAudio:function(){document.removeEventListener('touchstart',this.boundWebAudioUnlock,false);var buffer=this.audioContext.createBuffer(1,1,22050);var source=this.audioContext.createBufferSource();source.buffer=buffer;source.connect(this.audioContext.destination);source.start(0);},load:function(path,multiChannel,loadCallback){if(multiChannel&&ig.Sound.useWebAudio){return this.loadWebAudio(path,multiChannel,loadCallback);}
else{return this.loadHTML5Audio(path,multiChannel,loadCallback);}},loadWebAudio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){return this.clips[path];}
var audioSource=new ig.Sound.WebAudioSource()
this.clips[path]=audioSource;var request=new XMLHttpRequest();request.open('GET',realPath,true);request.responseType='arraybuffer';var that=this;request.onload=function(ev){that.audioContext.decodeAudioData(request.response,function(buffer){audioSource.buffer=buffer;loadCallback(path,true,ev);},function(ev){loadCallback(path,false,ev);});};request.onerror=function(ev){loadCallback(path,false,ev);};request.send();return audioSource;},loadHTML5Audio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(this.clips[path]instanceof ig.Sound.WebAudioSource){return this.clips[path];}
if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){if(ig.ua.mobile){setTimeout(function(){loadCallback(path,true,null);},0);}
else{clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];if(channels&&channels instanceof ig.Sound.WebAudioSource){return channels;}
for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);if(track instanceof ig.Sound.WebAudioSource){ig.system.stopRunLoop();throw("Sound '"+path+"' loaded as Multichannel but used for Music. "+"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)");}
track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this.fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,_loop:false,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load();},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;if(this.currentClip){this.currentClip.loop=loop;}},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.loop=this._loop;this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:false,init:function(){this.gain=ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});},play:function(){if(!this.buffer){return;}
var source=ig.soundManager.audioContext.createBufferSource();source.buffer=this.buffer;source.connect(this.gain);source.loop=this._loop;var that=this;this.sources.push(source);source.onended=function(){that.sources.erase(source);}
source.start(0);},pause:function(){for(var i=0;i<this.sources.length;i++){try{this.sources[i].stop();}catch(err){}}},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;for(var i=0;i<this.sources.length;i++){this.sources[i].loop=loop;}},getVolume:function(){return this.gain.gain.value;},setVolume:function(volume){this.gain.gain.value=volume;}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=true;ig.normalizeVendorAttribute(window,'AudioContext');ig.Sound.useWebAudio=!!window.AudioContext&&!window.nwf;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.image','impact.font','impact.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear('#000');if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=ig.system.width*0.6;var h=ig.system.height*0.1;var x=ig.system.width*0.5-w/2;var y=ig.system.height*0.5-h/2;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}}});});

// lib/impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return 0.04},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=0.04
ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer','impact.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';}},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
this.isUsingAccelerometer=true;window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var internalHeight=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var scaleY=ig.system.scale*(internalHeight/ig.system.realHeight);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scaleY;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(code<0&&!ig.ua.mobile){window.focus();}
if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.loader','impact.system','impact.input','impact.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});

// lib/impact/animation.js
ig.baked=true;ig.module('impact.animation').requires('impact.timer','impact.image').defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(path,width,height){this.width=width;this.height=height;this.image=new ig.Image(path);}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:false,y:false},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,size:0,sizeX:0,init:function(sheet,frameTime,sequence,stop){this.sheet=sheet;this.size=this.sheet.height;this.sizeX=this.sheet.width;this.pivot={x:sheet.width/2,y:sheet.height/2};this.timer=new ig.Timer();this.frameTime=frameTime;this.sequence=sequence;this.stop=!!stop;this.tile=this.sequence[0];},rewind:function(){this.timer.set();this.loopCount=0;this.frame=0;this.tile=this.sequence[0];return this;},gotoFrame:function(f){this.timer.set(this.frameTime*-f-0.0001);this.update();},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/this.sequence.length);if(this.stop&&this.loopCount>0){this.frame=this.sequence.length-1;}
else{this.frame=frameTotal%this.sequence.length;}
this.tile=this.sequence[this.frame];},draw:function(targetX,targetY){var bbsize=Math.max(this.sheet.width,this.sheet.height);if(targetX>ig.system.width||targetY>ig.system.height||targetX+bbsize<0||targetY+bbsize<0){return;}
if(this.alpha!=1){ig.system.context.globalAlpha=this.alpha;}
if(this.angle==0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);ig.system.context.restore();}
if(this.alpha!=1){ig.system.context.globalAlpha=1;}}});});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.animation','impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:false,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:false,freeze:false,stick:false,disableAnim:false,particle:false,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(x,y,settings){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=x;this.pos.y=this.last.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.pos.x=x;this.pos.y=y;this.last.x=x;this.last.y=y;this.vel.x=proto.vel.x;this.vel.y=proto.vel.y;this.accel.x=proto.accel.x;this.accel.y=proto.accel.y;this.health=proto.health;this._killed=proto._killed;this.standing=proto.standing;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this.collides=proto.collides;ig.merge(this,settings);},addAnim:function(name,frameTime,sequence,stop){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var a=new ig.Animation(this.animSheet,frameTime,sequence,stop);this.anims[name]=a;if(!this.currentAnim){this.currentAnim=a;}
return a;},update:function(){if(this.freeze===false){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);if(this.currentAnim&&this.disableAnim==false){this.currentAnim.update();}}},getNewVelocity:function(vel,accel,friction,max){if(accel){return(vel+accel*ig.system.tick).limit(-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return vel.limit(-max,max);},handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos=res.pos;},draw:function(){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}},kill:function(){ig.game.removeEntity(this);},receiveDamage:function(amount,from){this.health-=amount;if(this.health<=0){this.kill();}},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},distanceTo:function(other){var xd=(this.pos.x+this.size.x/2)-(other.pos.x+other.size.x/2);var yd=(this.pos.y+this.size.y/2)-(other.pos.y+other.size.y/2);return Math.sqrt(xd*xd+yd*yd);},angleTo:function(other){return Math.atan2((other.pos.y+other.size.y/2)-(this.pos.y+this.size.y/2),(other.pos.x+other.size.x/2)-(this.pos.x+this.size.x/2));},check:function(other){},collideWith:function(other,axis){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE){ig.Entity.solveCollision(a,b);}};ig.Entity.solveCollision=function(a,b){var weak=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED){weak=a;}
else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED){weak=b;}
if(a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x){if(a.last.y<b.last.y){ig.Entity.seperateOnYAxis(a,b,weak);}
else{ig.Entity.seperateOnYAxis(b,a,weak);}
a.collideWith(b,'y');b.collideWith(a,'y');}
else if(a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y){if(a.last.x<b.last.x){ig.Entity.seperateOnXAxis(a,b,weak);}
else{ig.Entity.seperateOnXAxis(b,a,weak);}
a.collideWith(b,'x');b.collideWith(a,'x');}};ig.Entity.seperateOnXAxis=function(left,right,weak){var nudge=(left.pos.x+left.size.x-right.pos.x);if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,weak==left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x;}
else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2;right.vel.x=v2;var resLeft=ig.game.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=ig.game.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x);}};ig.Entity.seperateOnYAxis=function(top,bottom,weak){var nudge=(top.pos.y+top.size.y-bottom.pos.y);if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y;var nudgeX=0;if(weak==top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity){weak.standing=true;nudgeX=strong.vel.x*ig.system.tick;}
var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak==top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y;weak.pos.x=resWeak.pos.x;}
else if(ig.game.gravity&&(bottom.standing||top.vel.y>0)){var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y);top.pos.y=resTop.pos.y;if(top.bounciness>0&&top.vel.y>top.minBounceVelocity){top.vel.y*=-top.bounciness;}
else{top.standing=true;top.vel.y=0;}}
else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2;bottom.vel.y=v2;var nudgeX=bottom.vel.x*ig.system.tick;var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y);top.pos.y=resTop.pos.y;var resBottom=ig.game.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y;}};});

// lib/impact/map.js
ig.baked=true;ig.module('impact.map').defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(tilesize,data){this.tilesize=tilesize;this.data=data;this.height=data.length;this.width=data[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize;},getTile:function(x,y){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){return this.data[ty][tx];}
else{return 0;}},setTile:function(x,y,tile){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){this.data[ty][tx]=tile;}}});});

// lib/impact/collision-map.js
ig.baked=true;ig.module('impact.collision-map').requires('impact.map').defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||ig.CollisionMap.defaultTileDef;for(var t in this.tiledef){if(t|0>this.lastSlope){this.lastSlope=t|0;}}},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:false,y:false,slope:false},pos:{x:x,y:y},tile:{x:0,y:0}};var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;res.tile.x=t;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.tile.y=t;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny};return true;}
return false;}});var H=1/2,N=1/3,M=2/3,SOLID=true,NON_SOLID=false;ig.CollisionMap.defaultTileDef={5:[0,1,1,M,SOLID],6:[0,M,1,N,SOLID],7:[0,N,1,0,SOLID],3:[0,1,1,H,SOLID],4:[0,H,1,0,SOLID],2:[0,1,1,0,SOLID],10:[H,1,1,0,SOLID],21:[0,1,H,0,SOLID],32:[M,1,1,0,SOLID],43:[N,1,M,0,SOLID],54:[0,1,N,0,SOLID],27:[0,0,1,N,SOLID],28:[0,N,1,M,SOLID],29:[0,M,1,1,SOLID],25:[0,0,1,H,SOLID],26:[0,H,1,1,SOLID],24:[0,0,1,1,SOLID],11:[0,0,H,1,SOLID],22:[H,0,1,1,SOLID],33:[0,0,N,1,SOLID],44:[N,0,M,1,SOLID],55:[M,0,1,1,SOLID],16:[1,N,0,0,SOLID],17:[1,M,0,N,SOLID],18:[1,1,0,M,SOLID],14:[1,H,0,0,SOLID],15:[1,1,0,H,SOLID],13:[1,1,0,0,SOLID],8:[H,1,0,0,SOLID],19:[1,1,H,0,SOLID],30:[N,1,0,0,SOLID],41:[M,1,N,0,SOLID],52:[1,1,M,0,SOLID],38:[1,M,0,1,SOLID],39:[1,N,0,M,SOLID],40:[1,0,0,N,SOLID],36:[1,H,0,1,SOLID],37:[1,0,0,H,SOLID],35:[1,0,0,1,SOLID],9:[1,0,H,1,SOLID],20:[H,0,0,1,SOLID],31:[1,0,M,1,SOLID],42:[M,0,N,1,SOLID],53:[N,0,0,1,SOLID],12:[0,0,1,0,NON_SOLID],23:[1,1,0,1,NON_SOLID],34:[1,0,1,1,NON_SOLID],45:[0,1,0,0,NON_SOLID]};ig.CollisionMap.staticNoCollision={trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};}};});

// lib/impact/background-map.js
ig.baked=true;ig.module('impact.background-map').requires('impact.map','impact.image').defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:false,tilesetName:'',foreground:false,enabled:true,preRender:false,preRenderedChunks:null,chunkSize:512,debugChunks:false,anims:{},init:function(tilesize,data,tileset){this.parent(tilesize,data);this.setTileset(tileset);},setTileset:function(tileset){this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null;},setScreenPos:function(x,y){this.scroll.x=x/this.distance;this.scroll.y=y/this.distance;},preRenderMapToChunks:function(){var totalWidth=this.width*this.tilesize*ig.system.scale,totalHeight=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(totalWidth,totalHeight),this.chunkSize);var chunkCols=Math.ceil(totalWidth/this.chunkSize),chunkRows=Math.ceil(totalHeight/this.chunkSize);this.preRenderedChunks=[];for(var y=0;y<chunkRows;y++){this.preRenderedChunks[y]=[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x==chunkCols-1)?totalWidth-x*this.chunkSize:this.chunkSize;var chunkHeight=(y==chunkRows-1)?totalHeight-y*this.chunkSize:this.chunkSize;this.preRenderedChunks[y][x]=this.preRenderChunk(x,y,chunkWidth,chunkHeight);}}},preRenderChunk:function(cx,cy,w,h){var tw=w/this.tilesize/ig.system.scale+1,th=h/this.tilesize/ig.system.scale+1;var nx=(cx*this.chunkSize/ig.system.scale)%this.tilesize,ny=(cy*this.chunkSize/ig.system.scale)%this.tilesize;var tx=Math.floor(cx*this.chunkSize/this.tilesize/ig.system.scale),ty=Math.floor(cy*this.chunkSize/this.tilesize/ig.system.scale);var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);var screenContext=ig.system.context;ig.system.context=chunkContext;for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<this.width&&y+ty<this.height){var tile=this.data[y+ty][x+tx];if(tile){this.tiles.drawTile(x*this.tilesize-nx,y*this.tilesize-ny,tile-1,this.tilesize);}}}}
ig.system.context=screenContext;return chunk;},draw:function(){if(!this.tiles.loaded||!this.enabled){return;}
if(this.preRender){this.drawPreRendered();}
else{this.drawTiled();}},drawPreRendered:function(){if(!this.preRenderedChunks){this.preRenderMapToChunks();}
var dx=ig.system.getDrawPos(this.scroll.x),dy=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var w=this.width*this.tilesize*ig.system.scale;dx=(dx%w+w)%w;var h=this.height*this.tilesize*ig.system.scale;dy=(dy%h+h)%h;}
var minChunkX=Math.max(Math.floor(dx/this.chunkSize),0),minChunkY=Math.max(Math.floor(dy/this.chunkSize),0),maxChunkX=Math.ceil((dx+ig.system.realWidth)/this.chunkSize),maxChunkY=Math.ceil((dy+ig.system.realHeight)/this.chunkSize),maxRealChunkX=this.preRenderedChunks[0].length,maxRealChunkY=this.preRenderedChunks.length;if(!this.repeat){maxChunkX=Math.min(maxChunkX,maxRealChunkX);maxChunkY=Math.min(maxChunkY,maxRealChunkY);}
var nudgeY=0;for(var cy=minChunkY;cy<maxChunkY;cy++){var nudgeX=0;for(var cx=minChunkX;cx<maxChunkX;cx++){var chunk=this.preRenderedChunks[cy%maxRealChunkY][cx%maxRealChunkX];var x=-dx+cx*this.chunkSize-nudgeX;var y=-dy+cy*this.chunkSize-nudgeY;ig.system.context.drawImage(chunk,x,y);ig.Image.drawCount++;if(this.debugChunks){ig.system.context.strokeStyle='#f0f';ig.system.context.strokeRect(x,y,this.chunkSize,this.chunkSize);}
if(this.repeat&&chunk.width<this.chunkSize&&x+chunk.width<ig.system.realWidth){nudgeX+=this.chunkSize-chunk.width;maxChunkX++;}}
if(this.repeat&&chunk.height<this.chunkSize&&y+chunk.height<ig.system.realHeight){nudgeY+=this.chunkSize-chunk.height;maxChunkY++;}}},drawTiled:function(){var tile=0,anim=null,tileOffsetX=(this.scroll.x/this.tilesize).toInt(),tileOffsetY=(this.scroll.y/this.tilesize).toInt(),pxOffsetX=this.scroll.x%this.tilesize,pxOffsetY=this.scroll.y%this.tilesize,pxMinX=-pxOffsetX-this.tilesize,pxMinY=-pxOffsetY-this.tilesize,pxMaxX=ig.system.width+this.tilesize-pxOffsetX,pxMaxY=ig.system.height+this.tilesize-pxOffsetY;for(var mapY=-1,pxY=pxMinY;pxY<pxMaxY;mapY++,pxY+=this.tilesize){var tileY=mapY+tileOffsetY;if(tileY>=this.height||tileY<0){if(!this.repeat){continue;}
tileY=(tileY%this.height+this.height)%this.height;}
for(var mapX=-1,pxX=pxMinX;pxX<pxMaxX;mapX++,pxX+=this.tilesize){var tileX=mapX+tileOffsetX;if(tileX>=this.width||tileX<0){if(!this.repeat){continue;}
tileX=(tileX%this.width+this.width)%this.width;}
if((tile=this.data[tileY][tileX])){if((anim=this.anims[tile-1])){anim.draw(pxX,pxY);}
else{this.tiles.drawTile(pxX,pxY,tile-1,this.tilesize);}}}}}});});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.entity','impact.collision-map','impact.background-map').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,paused:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var i=0;i<data.entities.length;i++){var ent=data.entities[i];this.spawnEntity(ent.type,ent.x,ent.y,ent.settings);}
this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var i=0;i<data.layer.length;i++){var ld=data.layer[i];if(ld.name=='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else{var newMap=new ig.BackgroundMap(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;this.backgroundMaps.push(newMap);}}
for(var i=0;i<this.entities.length;i++){this.entities[i].ready();}},loadLevelDeferred:function(data){this._levelToLoad=data;},getMapByName:function(name){if(name=='collision'){return this.collisionMap;}
for(var i=0;i<this.backgroundMaps.length;i++){if(this.backgroundMaps[i].name==name){return this.backgroundMaps[i];}}
return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
return ent;},sortEntities:function(){this.entities.sort(this.sortBy);},sortEntitiesDeferred:function(){this._doSortEntities=true;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},run:function(){this.update();this.draw();},update:function(){if(this._levelToLoad){this.loadLevel(this._levelToLoad);this._levelToLoad=null;}
this.updateEntities();this.checkEntities();for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];if(this._doSortEntities||this.autoSort){this.sortEntities();this._doSortEntities=false;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(var a in anims){anims[a].update();}}},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var mapIndex;for(mapIndex=0;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];if(map.foreground){break;}
map.setScreenPos(this.screen.x,this.screen.y);map.draw();}
this.drawEntities();for(mapIndex;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];map.setScreenPos(this.screen.x,this.screen.y);map.draw();}},drawEntities:function(){for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},checkEntities:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/game/gui_Moderator.js
ig.baked=true;ig.module('game.gui_Moderator').requires('impact.game').defines(function(){gui_Moderator=function(){ig.gui.element.add({name:'reload',group:'tvOptions',active:false,offsetX:0,offsetY:0,font:new ig.Font('media/04b03.font.png'),itext:"",size:{x:75,y:75},pos:{x:(ig.system.width/2)-37.5,y:0},state:{normal:{image:new ig.Image('media/reload.png'),tile:0,tileSize:75,active:false},active:{image:new ig.Image('media/reload.png'),tile:1,tileSize:75,active:true}},click:function(){ig.game.reloaded=true;if(ig.game.reloadBallrdy===true&&ig.game.loadedBallType.freeze===false){ig.game.cacheArrayClear();ig.game.spawnEntity("EntityBall",ig.game.getEntitiesByType(EntitySling)[0].pos.x,1000);for(i=0;i<=ig.game.enemyArchive.length;i++){if(typeof ig.game.getEntityByID(ig.game.enemyArchive[i])!='undefined'&&ig.game.getEntityByID(ig.game.enemyArchive[i]).hoverDwn==false)
{ig.game.getEntityByID(ig.game.enemyArchive[i]).hoverDwn=true}}
ig.game.loadedBallType.kill();ig.game.plotter.select=0;}},})
ig.gui.element.add({name:'freeze',offsetX:0,offsetY:0,group:'tvOptions',active:false,font:new ig.Font('media/04b03.font.png'),itext:"",toggle:true,size:{x:75,y:75},pos:{x:(ig.system.width/2)-37.5,y:((ig.system.height/2))*1.72,},state:{normal:{image:new ig.Image('media/freeze.png'),tile:0,tileSize:75,active:false},active:{image:new ig.Image('media/freeze.png'),tile:1,tileSize:75,active:true}},click:function(){if(ig.game.loadedBallType.freeze===true){ig.game.loadedBallType.freeze=false;ig.game.metamode=false}else
{ig.game.metamode=true
ig.game.loadedBallType.freeze=true;}},})
ig.gui.element.add({name:'startstop',offsetX:0,offsetY:0,group:'ctrl',active:false,font:new ig.Font('media/04b03.font.png'),itext:"",size:{x:75,y:75},pos:{x:0,y:((ig.system.height/2)-15)*1.9,},state:{normal:{image:new ig.Image('media/startStop.png'),tile:0,tileSize:75,active:false},active:{image:new ig.Image('media/startStop.png'),tile:1,tileSize:75,active:true}},click:function(){if(ig.game.loadedBallType.freeze===true){ig.game.startstop.unpause();ig.game.loadedBallType.freeze=false;}},})
ig.gui.element.add({name:'cameraOff',group:'ctrl2',active:false,font:new ig.Font('media/04b03.font.png'),itext:"C:on",size:{x:30,y:30},pos:{x:150,y:((ig.system.height/2)-15)*1.95,},state:{normal:{image:new ig.Image('media/tvButtons.png'),tile:1,tileSize:30,active:false},active:{image:new ig.Image('media/tvButtons.png'),tile:0,tileSize:30,active:true}},click:function(){ig.game.getEntitiesByType(EntityCamera)[0].cfON=!ig.game.getEntitiesByType(EntityCamera)[0].cfON;(ig.game.getEntitiesByType(EntityCamera)[0].cfON)?(this.itext="C:on"):(this.itext="C:off")},})
ig.gui.element.add({name:'nodeLft',offsetX:0,offsetY:0,group:'ctrl',active:false,font:new ig.Font('media/04b03.font.png'),itext:"",size:{x:53,y:53},flipY:false,pos:{x:(ig.system.width)-53,y:(ig.system.height/2)*1.72,},state:{normal:{image:new ig.Image('media/scrollbtn.png'),tile:0,tileSize:53,active:false},active:{image:new ig.Image('media/scrollbtn.png'),tile:1,tileSize:53,active:true}},click:function(){if(ig.game.loadedBallType.freeze===true&&ig.game.plotter.select>0){ig.game.plotter.select--
var cam=ig.game.getEntitiesByType(EntityCamera)[0];cam.srcSpeed=-1;}},})
ig.gui.element.add({name:'nodeRht',offsetX:0,offsetY:0,group:'ctrl',active:false,font:new ig.Font('media/04b03.font.png'),itext:"",flipY:true,size:{x:53,y:53},pos:{x:(ig.system.width)-53,y:-8,},state:{normal:{image:new ig.Image('media/scrollbtn.png'),tile:0,tileSize:53,active:false},active:{image:new ig.Image('media/scrollbtn.png'),tile:1,tileSize:53,active:true}},click:function(){if(ig.game.loadedBallType.freeze===true&&ig.game.plotter.select<ig.game.sData.length-2){ig.game.plotter.select++
var cam=ig.game.getEntitiesByType(EntityCamera)[0];cam.srcSpeed=1;}},})
ig.gui.element.add({name:'posX~',group:'ctrl2',active:false,font:new ig.Font('media/04b03.font.png'),itext:"X~",size:{x:30,y:30},pos:{x:10,y:120},state:{normal:{image:new ig.Image('media/tvButtons.png'),tile:1,tileSize:30},active:{image:new ig.Image('media/tvButtons.png'),tile:0,tileSize:30}},click:function(){if(ig.game.loadedBallType.freeze===true&&ig.game.sData[ig.game.plotter.select+1].invsY===false&&ig.game.sData[ig.game.plotter.select+1].invsX===false&&ig.game.sData[ig.game.plotter.select+1].invsVel===false){var len=ig.game.colData.length-1;ig.game.colData[ig.game.dirInc].invsX=true;ig.game.rebuildColDat(ig.game.sData[ig.game.plotter.select].indexOf,ig.game.dirInc);ig.game.dirInc++}},})
ig.gui.element.add({name:'null',offsetX:0,offsetY:0,group:'ctrl',active:false,font:new ig.Font('media/04b03.font.png'),itext:"",size:{x:45,y:45},pos:{x:0,y:60},state:{normal:{image:new ig.Image('media/null.png'),tile:0,tileSize:45},active:{image:new ig.Image('media/null.png'),tile:1,tileSize:45}},click:function(){if(ig.game.loadedBallType.freeze===true){for(i=0,len=ig.game.colData.length;i<len;i++){if(ig.game.sData[ig.game.plotter.select].indexOf===ig.game.colData[i].orderOf){ig.game.colData[i].orderOf=null;ig.game.colData[i].invsX=false;ig.game.colData[i].invsY=false;ig.game.colData[i].posX=0;ig.game.colData[i].posY=0;ig.game.colData[i].xBouy=0;ig.game.colData[i].yBouy=0;ig.game.colData[i].invsVel=false;if(ig.game.dirInc>0)ig.game.dirInc--;ig.game.rebuildColDat(null,i);break;}}}},})
ig.gui.element.add({name:'posY~',group:'ctrl2',active:false,font:new ig.Font('media/04b03.font.png'),itext:"Y~",size:{x:30,y:30},pos:{x:10,y:180,},state:{normal:{image:new ig.Image('media/tvButtons.png'),tile:1,tileSize:30},active:{image:new ig.Image('media/tvButtons.png'),tile:0,tileSize:30}},click:function(){if(ig.game.loadedBallType.freeze===true&&ig.game.sData[ig.game.plotter.select+1].invsX===false&&ig.game.sData[ig.game.plotter.select+1].invsY===false&&ig.game.sData[ig.game.plotter.select+1].invsVel===false){var len=ig.game.colData.length-1;ig.game.colData[ig.game.dirInc].invsY=true;ig.game.rebuildColDat(ig.game.sData[ig.game.plotter.select].indexOf,ig.game.dirInc);ig.game.dirInc++}},})
ig.gui.element.add({name:'velB',group:'ctrl2',active:true,font:new ig.Font('media/04b03.font.png'),itext:"V>>",size:{x:30,y:30},pos:{x:10,y:240,},state:{normal:{image:ig.game.tvButton,tile:1,tileSize:30},active:{image:ig.game.tvButton,tile:0,tileSize:30}},click:function(){if(ig.game.loadedBallType.freeze===true){ig.game.loadedBallType.vel.x*=1.5
ig.game.loadedBallType.vel.y*=1.5}},})
ig.gui.element.add({name:'insV',offsetX:-18.75,offsetY:-12.25,group:'ctrl',active:false,size:{x:50,y:50},pos:{x:0,y:0,},offset:{x:12.5,y:12.5},state:{normal:{image:ig.game.sliderImg,tile:0,tileSize:50,active:false,offset:{x:40,y:50}},active:{image:ig.game.sliderImg,tile:0,tileSize:50,active:true}},click:function(){var upper=ig.game;if(upper.loadedBallType.freeze===true&&ig.game.sData[ig.game.plotter.select+1].invsY===false&&ig.game.sData[ig.game.plotter.select+1].invsX===false&&ig.game.sData[ig.game.plotter.select].comColl===false&&ig.game.sData[ig.game.plotter.select-1].comColl===false&&ig.game.sData[ig.game.plotter.select+1].comColl===false&&upper.sData[upper.plotter.select].posX!==0&&upper.sData[upper.plotter.select].posX!==upper.gameDimesion.xLevel-upper.loadedBallType.size.x&&upper.sData[upper.plotter.select-1].posX!==0&&upper.sData[upper.plotter.select-1].posX!==upper.gameDimesion.xLevel-upper.loadedBallType.size.x&&upper.sData[upper.plotter.select+1].posX!==0&&upper.sData[upper.plotter.select+1].posX!==upper.gameDimesion.xLevel-upper.loadedBallType.size.x&&upper.sData[upper.plotter.select].posY!==1200&&upper.sData[upper.plotter.select-1].posY!==1200&&upper.sData[upper.plotter.select+1].posY!==1200&&upper.dirInc<upper.colData.length){function here(){upper.colData[upper.dirInc].invsVel=true;upper.rebuildColDat(upper.sData[upper.plotter.select].indexOf,upper.dirInc);ig.gui.element.action('getByName','insV').state.active.image=new ig.Image('media/slider.png');upper.dirInc++;}
if(ig.game.sData[ig.game.plotter.select+1].invsVel===false){here();}
if(ig.game.sData[ig.game.plotter.select+1].invsVel===true)
{ig.game.sData[ig.game.plotter.select+1].invsVel=false}}
else{ig.gui.element.action('getByName','insV').state.active.image=new ig.Image('media/noslider.png');}},})
ig.gui.element.add({name:'slider',group:'ctrl2',active:false,font:new ig.Font('media/04b03.font.png'),itext:"0",size:{x:50,y:30},pos:{x:(ig.system.width)-40,y:(ig.system.height/2)+(100),},state:{normal:{image:new ig.Image('media/tvButtons.png'),tile:1,tileSize:30,active:false},active:{image:new ig.Image('media/tvButtons.png'),tile:0,tileSize:30,active:true}},click:function(){if(ig.game.loadedBallType.freeze===true){this.active=true;}},})
ig.gui.element.add({name:'option',group:'Options',offsetX:0,offsetY:0,active:false,toggle:true,font:new ig.Font('media/04b03.font.png'),itext:"",size:{x:60,y:60},pos:{x:0,y:(ig.system.height/2)-(160),},state:{normal:{image:new ig.Image('media/optionMenu.png'),tile:0,tileSize:60,active:false},active:{image:new ig.Image('media/optionMenu.png'),tile:1,tileSize:60,active:true}},click:function(){if(this.active){ig.game.gameMode=2;ig.game.loadedBallType.freeze=true
ig.game.optionMenu=true}else{ig.game.gameMode=1;ig.game.optionMenu=false
ig.game.loadedBallType.freeze=false}},})
ig.gui.element.add({name:'options',group:'subOptions',offsetX:0,offsetY:0,active:true,toggle:true,font:new ig.Font('media/04b03.font.png'),itext:"",size:{x:150,y:50},pos:{x:65,y:(ig.system.height/2)-(110),},state:{normal:{image:new ig.Image('media/optPref.png'),tile:0,tileSize:150,active:false},active:{image:new ig.Image('media/optPref.png'),tile:1,tileSize:150,active:true}},click:function(){if(this.active){ig.game.prefMode=true;}else{ig.game.prefMode=false;}},})
ig.gui.element.add({name:'options',group:'subOptions',offsetX:0,offsetY:0,active:true,toggle:true,font:new ig.Font('media/04b03.font.png'),itext:"",size:{x:150,y:50},pos:{x:65,y:(ig.system.height/2)-(160),},state:{normal:{image:new ig.Image('media/optMusic.png'),tile:0,tileSize:150,active:false},active:{image:new ig.Image('media/optMusic.png'),tile:1,tileSize:150,active:true}},click:function(){if(this.active){ig.game.stopMusic=false;}else{ig.game.stopMusic=true;audio.stop(playThis);}},})}})

// lib/game/entities/Video.js
ig.baked=true;ig.module('game.entities.Video').requires('impact.entity').defines(function(){EntityVideo=ig.Entity.extend({_wmDrawBox:true,_wmBoxColor:'rgba(255, 100, 0, 0.7)',size:{x:500,y:320},pos:{x:0,y:0},videoSrc:'media/tutorial.m4v',videoControls:true,videoScaling:'aspect-fill',videoStartFrame:0,video:null,videoDisplay:'block',videoId:'v',init:function(x,y,settings){this.parent(x,y,settings);this.videoSrc;var video=document.createElement('video');var parent=this;video.src=this.videoSrc;video.id=this.videoId;video.style.display=this.videoDisplay;video.addEventListener('canplaythrough',function(){video.scalingMode=this.videoScaling;video.play();video.addEventListener('ended',function(){parent.videoEnded();},false);},false);this.video=video;},videoEnded:function(){this.kill();},kill:function(){var id=this.videoId;var vidDelete=document.getElementById(id);ig.system.setGame(MyGame);this.parent();},draw:function(){var ctx=ig.system.context;var s=ig.system.scale;var x=this.pos.x*s-ig.game.screen.x*s;var y=this.pos.y*s-ig.game.screen.y*s;var sizeX=this.size.x*s;var sizeY=this.size.y*s;ctx.save();ctx.drawImage(this.video,x,y,sizeX,sizeY);ctx.restore();this.parent();},update:function(){}});});

// lib/game/levels/movietest.js
ig.baked=true;ig.module('game.levels.movietest').requires('game.entities.Video').defines(function(){LevelMovieTestlvl={"entities":[],"layer":[{"name":"atmosphere","width":30,"height":20,"linkWithCollision":false,"visible":1,"repeat":false,"preRender":true,"distance":"1","tilesize":70,"foreground":false,"data":[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}]};});

// lib/plugins/impact-storage.js
ig.baked=true;ig.module('plugins.impact-storage').requires('impact.game').defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(i){return!ig.Storage.instance?null:ig.Storage.instance;},init:function(){ig.Storage.instance=this;},isCapable:function(){return!(typeof(window.localStorage)==='undefined');},isSet:function(key){return!(this.get(key)===null);},initUnset:function(key,value){if(this.get(key)===null)this.set(key,value);},get:function(key){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(key));}catch(e){return window.localStorage.getItem(key);}},getInt:function(key){return~~this.get(key);},getFloat:function(key){return parseFloat(this.get(key));},getBool:function(key){return!!this.get(key);},key:function(n){return this.isCapable()?window.localStorage.key(n):null;},set:function(key,value){if(!this.isCapable())return null;try{window.localStorage.setItem(key,JSON.stringify(value));}catch(e){if(e==QUOTA_EXCEEDED_ERR)
console.log('localStorage quota exceeded');}},setHighest:function(key,value){if(value>this.getFloat(key))this.set(key,value);},remove:function(key){if(!this.isCapable())return null;window.localStorage.removeItem(key);},clear:function(){if(!this.isCapable())return null;window.localStorage.clear();}});});

// lib/plugins/gui.js
ig.baked=true;ig.module('plugins.gui').requires('impact.game','impact.font','impact.input').defines(function(){'use strict';ig.gui={show:true,initialized:false,within:false,toX:0,toY:0,cursor:{pos:{x:0,y:0},offset:{x:0,y:0},image:null,set:function(image){this.image=image;},clear:function(){this.image=null;},draw:function(){if(this.image!=null)
this.image.draw(this.pos.x-this.offset.x,this.pos.y-this.offset.y);}},elements:[],element:{offsetX:0,offsetY:0,itext:[],font:new ig.Font('media/04b03.font.png'),textAlign:ig.Font.ALIGN.LEFT,flipX:false,flipY:false,action:function(action,name){var collection=[];for(var i=0;i<ig.gui.elements.length;i++){if(action=='getByName'&&ig.gui.elements[i].name==name)
collection.push(ig.gui.elements[i]);if(action=='getByGroup'&&ig.gui.elements[i].group==name)
collection.push(ig.gui.elements[i]);if(action=='show'&&ig.gui.elements[i].name==name)
ig.gui.elements[i].show=true;if(action=='showGroup'&&ig.gui.elements[i].group==name)
ig.gui.elements[i].show=true;if(action=='hide'&&ig.gui.elements[i].name==name)
ig.gui.elements[i].show=false;if(action=='hideGroup'&&ig.gui.elements[i].group==name)
ig.gui.elements[i].show=false;if(action=='remove'&&ig.gui.elements[i].name==name)
ig.gui.elements.erase(ig.gui.elements[i]);if(action=='removeGroup'&&ig.gui.elements[i].group==name)
ig.gui.elements.erase(ig.gui.elements[i]);if(action=='enable'&&ig.gui.elements[i].name==name)
ig.gui.elements[i].disable=false;if(action=='enableGroup'&&ig.gui.elements[i].group==name)
ig.gui.elements[i].disable=false;if(action=='disable'&&ig.gui.elements[i].name==name)
ig.gui.elements[i].disable=true;if(action=='enableGroup'&&ig.gui.elements[i].group==name)
ig.gui.elements[i].disable=true;if(action=='disableAll')
ig.gui.elements[i].disable=true;}
if(collection.length){if(collection.length==1)collection=collection[0];return collection;}},add:function(element){if(element.show==undefined)element.show=true;if(element.disabled==undefined)element.disabled=false;if(element.active==undefined)element.active=false;ig.gui.elements.push(element);},draw:function(){for(var i=0,l=ig.gui.elements.length;i<l;i++){var element=ig.gui.elements[i],state='normal';if(ig.ua.mobile===false){if(!element.show)continue;if(ig.gui.cursor.pos.x>=element.pos.x+element.offsetX&&ig.gui.cursor.pos.x<=element.pos.x+element.size.x+element.offsetX&&ig.gui.cursor.pos.y>=element.pos.y+element.offsetY&&ig.gui.cursor.pos.y<=element.pos.y+element.size.y+element.offsetY&&!element.disabled){state='hover';element.within=true;}else{element.within=false;}
if(state=='hover'&&(ig.input.state('click')||ig.input.pressed('click'))){state='active';if(ig.input.state('click')&&typeof ig.gui.elements[i].mouseDown=='function')
ig.gui.elements[i].mouseDown.call(element);if(ig.input.pressed('click')){if(element.toggle)
element.active=!element.active;if(typeof ig.gui.elements[i].click=='function')
ig.gui.elements[i].click.call(element);}}}else
{var element=ig.gui.elements[i],state='normal';var upper=ig.game;var refCanvas=ig.system.canvas;var pos={left:0,top:0};if(refCanvas.getBoundingClientRect){pos=refCanvas.getBoundingClientRect();}
if(!element.show)continue;if(ig.input.state('click')==true){upper.toX=ig.input.mouse.x;upper.toY=ig.input.mouse.y;upper.touching=true;}else{upper.touching=false;}
if(ig.game.toX>=element.pos.x+element.offsetX&&ig.game.toX<=element.pos.x+element.size.x+element.offsetX&&ig.game.toY>=element.pos.y+element.offsetY&&ig.game.toY<=element.pos.y+element.size.y+element.offsetY&&!element.disabled&&ig.game.touching==true)
{state='hover';element.within=true;}else{element.within=false;}
if(state=='hover'){state='active';if(ig.input.pressed('click')){if(element.toggle)
element.active=!element.active;if(typeof ig.gui.elements[i].click=='function')
ig.gui.elements[i].click.call(element);}}}
if(element.toggle&&element.active)
state='active';if(ig.gui.elements[i].state[state]==undefined)
state='normal';var image=ig.gui.elements[i].state[state];if(isNaN(image.tile)||isNaN(image.tileSize)){image.image.draw(element.pos.x,element.pos.y);}else{image.image.drawTile(element.pos.x+element.offsetX,element.pos.y+element.offsetY,image.tile,image.tileSize,false,element.flipX,element.flipY);}
(ig.gui.elements[i].disable==true)?element.alpha=1:element.alpha=0;if(typeof element.font!='undefined'&&element.itext.length>0)
{element.font.draw(element.itext,element.pos.x+(element.size.x/2)+3,element.pos.y+(element.size.y/2)-3,ig.Font.ALIGN.CENTER);}}}},touchStart:function(e){},touchEnd:function(e){},draw:function(){this.element.draw();this.cursor.pos={x:ig.input.mouse.x,y:ig.input.mouse.y}
this.cursor.draw();}}
ig.Game.inject({update:function(){this.parent();if(ig.gui.initialized)return;else ig.gui.initialized=true;}});});

// lib/game/entities/Camera.js
ig.baked=true;ig.module('game.entities.Camera').requires('impact.entity','impact.game','plugins.impact-storage','game.gui_Moderator','plugins.gui','impact.font').defines(function(){var storage=new ig.Storage();storage.initUnset('gameMode',0);EntityCamera=ig.Entity.extend({gameMode:0,maxVel:{x:6000,y:6000},zindex:-500,gotoNxtRound:false,ball:null,sling:null,size:{x:0,y:0},ignorePause:true,gravityFactor:0,upDate:0,clickndrag:false,menuText:new ig.Font('media/04b03.font.png'),cfON:true,altPress:false,tPDelay:false,tPress:false,shakeTime:null,shake:false,sMag:{x:0,y:0},sTime:.1,sPnt:{x:0,y:0},ePnt:{x:0,y:0},tSpeed:false,srcSpeed:0,gradPix:new Image(240,320),gradPix2:new Image(240,320),timerEff:null,yScroll:0,trigger:false,Vfx:0,preVfx:0,rData:[],pasTime:0,curTime:0,viewPrev:{x:0,y:0},view:{x:0,y:0},init:function(x,y,settings){this.rData.length=40;for(i=0;i<this.rData.length;i++)
{var sPos=new Object();sPos.posX=0;sPos.posY=0;sPos.time=i*0.04;this.rData[i]=sPos}
this.pasTime=new ig.Timer();this.pasTime.pause();this.curTime=new ig.Timer();this.curTime.pause();if(ig.global.guiRunning===false){gui_Moderator();}
ig.global.guiRunning=true;this.srcSpeed=0;this.tSpeed=new ig.Timer();this.tPDelay=new ig.Timer();this.shakeTime=new ig.Timer();this.timerEff=new ig.Timer();this.timerEff.pause();this.tSpeed.pause();this.tPDelay.pause();this.shakeTime.pause();this.gameMode=ig.game.gameMode;this.parent(x,y,settings);this.pos.x=120
this.pos.y=1000
this._wmDrawBox=true;this._wmBoxColor='rgba(255,0,255,0.5)';ig.game.specialEntity=this;this.view.x=this.pos.x;this.view.y=this.pos.y;this.gradPix=new Image(240,320);this.gradPix.src='media/gradPix4.png';this.gradPix2.src='media/gradPix5.png';},update:function(){this.ball=ig.game.loadedBallType===null?ig.game.getEntitiesByType(EntityBall)[0]:ig.game.loadedBallType
this.sling=ig.game.getEntitiesByType(EntitySling)[0];var slingshot=ig.game.getEntitiesByType(EntitySlingShot)[0];var sling=ig.game.getEntitiesByType(EntitySling)[0]
ig.game.screen.x=(this.pos.x)-(ig.system.width/2);ig.game.screen.y=(this.pos.y)-ig.system.height/2;if(this.shake===true){{this.shake=true;this.shakeTime.unpause();var speed=this.shakeTime.delta()*100;this.vel.x=(Math.sin(speed)).toDeg()*this.sMag.x;this.vel.y=(Math.sin(speed)).toDeg()*this.sMag.y;if(this.shakeTime.delta()>this.sTime){this.shakeTime.reset();this.shakeTime.pause();this.shake=false;this.vel.x=0;this.pos.x=ig.game.gameDimesion.sndSec;}}}
if(ig.game.gameMode==4){this.pos.x=this.view.x
this.pos.y=this.view.y}else{if(this.ball.vel.y!==0&&ig.game.loadedBallType.freeze===false){this.pos.x=ig.game.gameDimesion.sndSec;this.pos.y=ig.game.sData[2].posY;}
else if(this.ball.vel.y==0&&sling.pos.y<1230){this.pos.y=(slingshot.pos.y+60)+((sling.pos.y-1000)/3.5)}}
ig.gui.element.action('showGroup','Options');ig.gui.element.action('enableGroup','Options');if(this.ball.vel.y===0){ig.gui.element.action('hideGroup','tvOptions');ig.gui.element.action('disableGroup','tvOptions');ig.game.screen.x=(this.pos.x)-(ig.system.width/2);ig.game.screen.y=(this.pos.y)-ig.system.height/2;}else{ig.gui.element.action('showGroup','tvOptions')
ig.gui.element.action('enableGroup','tvOptions')}
if(sling.hold==true||this.ball.freeze==true&&ig.game.optionMenu==false){ig.gui.element.action('hideGroup','Options');ig.gui.element.action('disableGroup','Options');}
if(ig.game.optionMenu==false){ig.gui.element.action('hideGroup','subOptions');ig.gui.element.action('disableGroup','subOptions');}else{ig.gui.element.action('showGroup','subOptions');ig.gui.element.action('enableGroup','subOptions');ig.gui.element.action('hideGroup','ctrl'),ig.gui.element.action('disableGroup','ctrl');ig.gui.element.action('hideGroup','tvOptions');ig.gui.element.action('disableGroup','tvOptions');ig.game.reloadBallrdy==false;}
if(this.ball!==null){ig.gui.element.action('hideGroup','ctrl2');ig.gui.element.action('disableGroup','ctrl2');(ig.game.metamode==true)?(ig.gui.element.action('showGroup','ctrl'),ig.gui.element.action('enableGroup','ctrl')):(ig.gui.element.action('hideGroup','ctrl'),ig.gui.element.action('disableGroup','ctrl'));if(ig.game.metamode==true){this.pos.y=ig.game.plotter.y
ig.game.screen.x=((ig.game.plotter.x)-(ig.system.width/2))*ig.system.scale;}else{}
if(ig.game.metamode==true)
{ig.gui.element.action('hide','reload');ig.gui.element.action('disable','reload');}
else{if(ig.game.reloadBallrdy==true){ig.gui.element.action('show','reload');ig.gui.element.action('enable','reload');ig.gui.element.action('getByName','reload').alpha=1;}}}
if(ig.game.reloadBallrdy==false){ig.gui.element.action('disabled','reload');ig.gui.element.action('getByName','reload').alpha=0;}
allBrel=(ig.gui.element.action('getByName','freeze').within||ig.gui.element.action('getByName','slider').within||ig.gui.element.action('getByName','nodeRht').within||ig.gui.element.action('getByName','nodeLft').within||ig.gui.element.action('getByName','reload').within);var slider,edgeBgn,edgeEnd,calibY,calibY2;var slideVal,unit,maxima,array,offX;var dist=0;var speed;var lastStp;var upDateLast=function(update){lastStp=update;}
if(ig.input.state('click')&&ig.input.mouse.x>ig.system.width-50){if(this.sPnt.y===0){this.sPnt.y=ig.input.mouse.y.round()}else{upDateLast(this.ePnt.y);this.ePnt.y=ig.input.mouse.y.round()
if(this.ePnt.y!==lastStp||this.ePnt.y==0||this.ePnt.y===this.sPnt.y){this.ePnt.y=(ig.input.mouse.y.round())}
else
if(this.ePnt.y===lastStp||!ig.input.state('click')){this.tSpeed.reset();this.tSpeed.pause();this.sPnt.y=lastStp;this.ePnt.y=lastStp;}
dist=(this.sPnt.y-(this.ePnt.y));if(dist!==0){this.tSpeed.unpause();}}}else{this.tSpeed.reset();this.tSpeed.pause();upDateLast(this.ePnt.y);this.ePnt.y=lastStp;this.sPnt.y=0}
speed=dist;speed=(((((dist)/(this.tSpeed.delta()+1)))).round()).limit(-2,2);this.srcSpeed=(((((dist)/(this.tSpeed.delta()+1)))));if(this.ball.freeze==true){if(ig.game.plotter.select+speed<ig.game.sData.length-2&&ig.game.plotter.select+speed>1&&!ig.gui.element.action('getByName','insV').within&&this.clickndrag===false){ig.game.plotter.select+=speed;}
if(ig.game.plotter.select+speed>ig.game.sData.length-1)ig.game.plotter.select=ig.game.sData.length-2;if(ig.game.plotter.select+speed<0)ig.game.plotter.select=0;}
calibY=100
calibY2=110
slider=ig.gui.element.action('getByName','slider');edgeBgn=(ig.system.width/2)+(0);edgeEnd=(ig.system.width/2)+(ig.game.sData.length-1);edgeBgnY=(ig.system.height/2)+(calibY)
edgeEndY=(ig.system.height/2)-calibY2
maxima=ig.game.sData.length-1
unit=(maxima/(calibY+calibY2))
slideVal=((((edgeBgnY-slider.pos.y))*unit).floor());offY=slider.size.y/2;if(ig.input.state('click')&&slider.within&&this.tPress===false){slider.pos.y=((ig.input.mouse.y)-offY).limit(edgeEndY+1,edgeBgnY);ig.game.plotter.select=slideVal;}
var atlias,xLmt,xProp,yProp,xDisp,yDisp,dist;atlias=ig.gui.element.action('getByName','insV');button=ig.gui.element.action('getByName','freeze');if(this.upDate!==ig.game.plotter.select){this.upDate=ig.game.plotter.select;atlias.pos.x=((ig.game.plotter.x)-(ig.game.screen.x/ig.system.scale))
atlias.pos.y=(ig.game.plotter.y-ig.game.screen.y)}
if(ig.input.pressed('click')==true){this.tPDelay.unpause();}
if(this.tPDelay.delta()>.12){this.tPDelay.reset();this.tPDelay.pause();}
if(ig.input.released('click')==true&&this.tPDelay.delta()==0)this.tPress=false;if(ig.input.state('click')&&atlias.within&&allBrel===false&&this.tPDelay.delta()!=0){this.tPress=true;}
if(this.tPress)
{ig.gui.element.action('hide','insV');var mouse={x:((ig.game._rscreen.x/ig.system.scale)+ig.input.mouse.x),y:(ig.input.mouse.y)}
xProp=(ig.game.plotter.x-(ig.game._rscreen.x/ig.system.scale));yProp=(ig.game.plotter.y-ig.game._rscreen.y);xProp2=ig.game.plotter.x+(ig.game._rscreen.x/ig.system.scale);yProp2=(ig.game.plotter.y);var Var={x:(ig.game.plotter.x+(ig.game._rscreen.x/ig.system.scale)),y:(ig.game.plotter.y-(ig.game._rscreen.y))}
var Var2={x:atlias.pos.x+(ig.game._rscreen.x/ig.system.scale),y:(atlias.pos.y+ig.game._rscreen.y)}
var angle=0.001;Vang1={x:(ig.game.plotter.x+(ig.game._rscreen.x/ig.system.scale)),y:ig.game.plotter.y};Vang2={x:ig.game._rscreen.y+atlias.pos.y,y:ig.game._rscreen.y+atlias.pos.y};Vang3={x:((ig.game._rscreen.x*(2/ig.system.scale))+ig.input.mouse.x),y:(ig.input.mouse.y)}
if(Var2.x==ig.game.plotter.x&&mouse.x==ig.game.plotter.x&&mouse.y<ig.game.plotter.y){angle=0}
if(Var2.x==ig.game.plotter.x&&mouse.x==ig.game.plotter.x&&mouse.y>ig.game.plotter.y){angle=180}
if(Var2.x<ig.game.plotter.x&&mouse.x<ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Vang3.x-Var.x),(Vang3.y-Var.y)))-(0).toRad())).toDeg());;}
if(Var2.x>ig.game.plotter.x&&mouse.x>ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Vang3.x-Var.x),(Vang3.y-Var.y)))-(0).toRad())).toDeg());}
if(Var2.x>ig.game.plotter.x&&mouse.x<ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Vang3.x-Var.x),(Vang3.y-Var.y)))-(180).toRad())).toDeg());}
if(Var2.x<ig.game.plotter.x&&mouse.x>ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Var.x-Vang3.x),(Var.y-Vang3.y)))-(180).toRad())).toDeg());}
var dist2=Math.sqrt(Math.pow(xProp-(ig.input.mouse.x),2)+
Math.pow((((ig.game.plotter.y-ig.game._rscreen.y))-(ig.input.mouse.y)),2));var dist3=Math.sqrt(Math.pow((ig.game.plotter.x+(ig.game._rscreen.x/ig.system.scale)-(((ig.game._rscreen.x*2)/ig.system.scale)+atlias.pos.x)),2)+
Math.pow(((yProp)-(atlias.pos.y)),2));var dist4=Math.sqrt(Math.pow((xProp)-(atlias.pos.x),2)+
Math.pow((ig.game.plotter.y-(atlias.pos.y+ig.game._rscreen.y)),2));xLmt=30
sQR=(Math.sqrt(Math.pow(xLmt,2)/2)).round()
var2=45-sQR;var posAdis={x:(dist3.limit(0,xLmt+1))*Math.sin(angle.toRad()),y:(dist3.limit(0,xLmt+1))*Math.cos(angle.toRad())};xDisp=((xProp)-atlias.pos.x).round(4);yDisp=((yProp)-(atlias.pos.y)).round(4);if(atlias.pos.x<((ig.game.plotter.x)-(ig.game._rscreen.x/ig.system.scale))){posAdis.x*=-1;}
if(atlias.pos.x>((ig.game.plotter.x)-(ig.game._rscreen.x/ig.system.scale))){Math.abs(posAdis.x);}
if(dist2>=xLmt&&dist4>=xLmt)
{atlias.pos.x=((posAdis.x)+(ig.game.plotter.x-(ig.game._rscreen.x/ig.system.scale))).limit(xProp-xLmt,xProp+xLmt);atlias.pos.y=(((posAdis.y)+((ig.game.plotter.y)-(ig.game._rscreen.y)))).limit(yProp-xLmt,yProp+xLmt);;}else
{atlias.pos.x=((ig.input.mouse.x))
atlias.pos.y=((ig.input.mouse.y))}
var exT=((dist4/xLmt)).round(2)
ig.game.sData[ig.game.plotter.select].xBouy=((2*(xDisp/(sQR)))*(this.ball.bounciness)).limit(-1,1);ig.game.sData[ig.game.plotter.select].yBouy=((2*((yDisp)/(sQR)))*(this.ball.bounciness)).limit(-1,1);this.clickndrag=true;}else{atlias.pos.x=((ig.game.plotter.x)-(ig.game.screen.x/ig.system.scale))
atlias.pos.y=(ig.game.plotter.y-ig.game.screen.y)}
if(ig.input.released('click')&&!atlias.within)this.clickndrag=false;if(ig.input.pressed('click')&&!atlias.within)this.clickndrag=false;this.parent();},shakeCam:function(magX=5,magY=5,time=.1){this.shake=true;this.sMag.x=magX;this.sMag.y=magY;this.sTime=time;},draw:function(){this.parent();var ctx=ig.system.context;var width=ig.system.width*ig.system.scale;var height=ig.system.height*ig.system.scale;this.Vfx=this.getAudFX();var Veffect=10*((window.lerp(this.preVfx,this.Vfx,0.25))*10);var effect=Math.abs((1000-ig.game.screen.y)/150).round();var scroll=((ig.game.screen.y-(2240*7))/20).round();var scroll2=((ig.game.screen.y-(2500))/2).round();if(ig.system.scale==2){ig.system.context.fillStyle=ig.system.context.createPattern(this.gradPix,"repeat");ig.system.context.save();ig.system.context.translate(this.gradPix.x,(this.gradPix.y-scroll));ig.system.context.fillRect(0,scroll,(this.gradPix.width*ig.system.scale),((this.gradPix.height)*ig.system.scale));ig.system.context.restore();}else{ig.system.context.fillStyle=ig.system.context.createPattern(this.gradPix2,"repeat");ig.system.context.save();ig.system.context.translate(this.gradPix2.x,(this.gradPix2.y-scroll2));ig.system.context.fillRect(0,scroll2,(this.gradPix2.width*ig.system.scale),((this.gradPix2.height)*ig.system.scale));ig.system.context.restore();}
if(ig.game.comboCount>1&&ig.game.stopMusic==false||ig.game.loadedBallType.freeze==true&&ig.game.stopMusic==false){ig.system.context.globalCompositeOperation="source-atop";ig.system.context.restore();hue2=(Veffect+30);sat2=50;lig2=50;ig.system.context.globalCompositeOperation="color";ig.system.context.fillStyle="hsl("+hue2+","+(100)+"%, 25%)";ig.system.context.fillRect(0,0,this.gradPix.width*ig.system.scale,(this.gradPix.height)*ig.system.scale);ig.system.context.globalCompositeOperation="destination-in";ig.system.context.globalCompositeOperation="source-atop";}
var sampleMap=ig.game.backgroundMaps[0];var tilesize=ig.game.gameDimesion.tilesize
var yLevel,xLevel
var Cam=ig.game.loadedBallType
var xLevel=ig.system.width*ig.system.scale;var yLevel=ig.system.height*ig.system.scale;ig.system.context.fillStyle="lime"
ig.system.context.fillRect(0,(1400-ig.game._rscreen.y),xLevel,yLevel);ig.system.context.fillStyle="green"
ig.system.context.fillRect(0,(1500-ig.game._rscreen.y),xLevel,yLevel);ig.system.context.fillStyle="red"
ig.system.context.fillStyle="navy"
ig.system.context.fillRect(-(ig.game._rscreen.x+(5*ig.system.scale))+(ig.game.gameDimesion.xLevel*ig.system.scale)+9,0,400,680*ig.system.scale)
ig.system.context.fillStyle="navy"
ig.system.context.fillRect(-ig.game._rscreen.x-404.5,0,400,680*ig.system.scale)
ig.system.context.fillStyle="white"
ig.system.context.fillRect(0,((1000)-((ig.game._rscreen.y)+(ig.game.getEntitiesByType(EntitySling)[0].appoxHeight)))*ig.system.scale,ig.game.gameDimesion.ground,5*ig.system.scale);ig.system.context.fillStyle="red"
ig.system.context.fillRect(0,((1000)-((ig.game._rscreen.y)-ig.game.penaltyLine))*ig.system.scale,ig.game.gameDimesion.ground,10*ig.system.scale)
var angleR=(180).toRad();var angleRX=(180).toRad();if(ig.game.loadedBallType.vel.y>0){angleRY=(180).toRad();}else{angleRY=(-180).toRad();}
var offset=(ig.game.loadedBallType.size.x/2);var sizeW=15*ig.system.scale;if(ig.game.loadedBallType.vel.y!=0)this.pasTime.unpause();if(ig.game.loadedBallType.vel.y!=0)this.curTime.unpause();for(i=3;i<15;i++){ig.system.context.beginPath();var rand=ig.game.Randomize(20);if(this.rData[i].time.round(2)==(this.pasTime.delta().round(2))){this.rData[i].posX=ig.game.loadedBallType.pos.x;this.rData[i].posY=ig.game.loadedBallType.pos.y;this.rData[i].time=(this.pasTime.delta()+(0.04*i)).round(2);}
var x=this.rData[i].posX,y=this.rData[i].posY;ig.system.context.fillStyle='rgb('+(255-(Veffect))+', '+i*13+', 55)';ig.system.context.beginPath();ig.system.context.arc(((this.rData[i].posX+(offset))*ig.system.scale),(((this.rData[i].posY+(offset))-(ig.game._rscreen.y))*ig.system.scale),sizeW,0,2*Math.PI);ig.system.context.fill();ig.system.context.stroke();}
var yLevel,xLevel,yFrame,xFrame,xOffset,yOffset,sampleMap,tilesize,yScrolling,xScale,yOffCalib;sampleMap=ig.game.backgroundMaps[0];tilesize=sampleMap.tilesize;xScale=1.2
yScale=1.2
xLevel=ig.system.width*ig.system.scale;yLevel=ig.system.height*ig.system.scale;xFrame=xLevel/xScale
yFrame=yLevel/yScale
xOffset=((xLevel/2)-(xFrame/2))
yOffset=1060-ig.game._rscreen.y;yOffCalib=60;xOffCalib=20;var clapperBoardbotm=new ig.Image('media/clapperBoard1.png')
var clapperBoardtop=new ig.AnimationSheet('media/clapperBoard2.png',230,30)
var clapperClap=new ig.Animation(clapperBoardtop,0,[0])
if(ig.input.pressed('click')&&this.yScroll<20&&this.yScroll!=-1&&ig.game.gameMode==0)this.trigger=true;if(this.trigger===true){this.timerEff.unpause();if(this.timerEff.delta()>0.01&&this.yScroll!=20)
{this.yScroll+=2;this.timerEff.reset()}
if(this.yScroll>20)
{this.yScroll=20;this.timerEff.pause();}}
if(ig.game.gameMode==0){var pos={x:5,y:100};clapperClap.pivot.x=0
clapperClap.pivot.y=30
clapperClap.angle=(-20+this.yScroll).toRad();clapperClap.draw(5,pos.y-30)
clapperBoardbotm.draw(pos.x,pos.y)
ig.system.context.fillStyle="black";ig.system.context.font=(ig.system.scale/2)*40+"px Arial";ig.system.context.textAlign="left";ig.system.context.fillText(ig.game.roundNum+1,(pos.x+50)*ig.system.scale,(pos.y+90)*ig.system.scale);ig.system.context.fillText(ig.game.totalMonsters,(pos.x+170)*ig.system.scale,(pos.y+90)*ig.system.scale);ig.system.context.fillText(ig.game.stats.points,(pos.x+20)*ig.system.scale,(pos.y+130)*ig.system.scale);if(this.yScroll==20){this.trigger=false;this.yScroll=0;ig.game.gameMode=1;}}
if(ig.game.getEntitiesByType(EntitySling)[0].hold===true){ig.system.context.beginPath();ig.system.context.rect(xOffset,yOffset,xFrame,yFrame);ig.system.context.globalAlpha=0.7;ig.system.context.fillStyle="SLATEGRAY"
ig.system.context.fill();ig.system.context.globalAlpha=1;ig.system.context.fillStyle="lime";ig.system.context.font=(ig.system.scale/2)*20+"px Arial";ig.system.context.textAlign="left";ig.system.context.fillText("round: "+(ig.game.roundNum+1),xOffset+((ig.system.scale/2)*5),yOffset+((ig.system.scale/2)*20));ig.system.context.fillText("wave: "+(ig.game.wave+1),xOffset+((ig.system.scale/2)*140),yOffset+((ig.system.scale/2)*20));ig.system.context.fillText("monsters: "+ig.game.countEnemy,xOffset+((ig.system.scale/2)*240),yOffset+((ig.system.scale/2)*20));ig.system.context.fillText("score: "+ig.game.stats.points.round(),xOffset+((ig.system.scale/2)*5),yOffset+((ig.system.scale/2)*50));}
if(ig.game.gameMode===1)
{if(ig.game.getEntitiesByType(EntitySling)[0].hold==true&&this.cfON==true||ig.game.getEntitiesByType(EntitySling)[0].hold==true&&this.cfON==false)
{yScrolling=(ig.game.getEntitiesByType(EntitySling)[0].appoxHeight-1000);}
if(ig.game.getEntitiesByType(EntitySling)[0].hold==false&&this.cfON==false)
{yScrolling=(-ig.game.loadedBallType.pos.y-600)+1000;}
ig.system.context.beginPath();ig.system.context.fillStyle="white";ig.system.context.fillRect(((xOffset*xScale))/xScale,((((1000-ig.game.getEntitiesByType(EntitySling)[0].appoxHeight))+yScrolling)/yScale+yOffset+yOffCalib),xFrame,2)
if(ig.game.gameDimesion.ground+yScrolling<yLevel-(yOffCalib*yScale)){ig.system.context.fillRect(((xOffset*4))/4,(ig.game.gameDimesion.ground+yScrolling)/yScale+yOffset+yOffCalib,xFrame,2)}
ig.system.context.fillStyle="red"
if(ig.game.penaltyLine+yScrolling<yLevel-(yOffCalib*yScale)){ig.system.context.fillRect(((xOffset*4))/4,((1000+ig.game.penaltyLine)+yScrolling)/yScale+yOffset+yOffCalib,xFrame,25)}
ig.system.context.fillStyle="white"
for(i=0;i<ig.game.sData.length;i+=4)
{if(ig.game.sData[i].posY+yScrolling<yLevel-(yOffCalib*yScale))
{if(typeof ig.game.sData[i-1]!='undefined'){ig.system.context.beginPath();ig.system.context.lineWidth=ig.game.loadedBallType.size.x/xScale;ig.system.context.moveTo(((((ig.game.sData[i-1].posX*ig.system.scale)+xOffset*xScale))/xScale)+ig.game.loadedBallType.size.x/2,((ig.game.sData[i-1].posY+yScrolling)/yScale+yOffset+yOffCalib)+ig.game.loadedBallType.size.x/2);ig.system.context.lineTo(((((ig.game.sData[i].posX*ig.system.scale)+xOffset*xScale))/xScale)+ig.game.loadedBallType.size.x/2,((ig.game.sData[i].posY+yScrolling)/yScale+yOffset+yOffCalib)+ig.game.loadedBallType.size.x/2);ig.system.context.stroke();}}}
if(ig.game.countEnemy!=0){for(i=0;i<=ig.game.enemyArchive.length;i++){if(typeof ig.game.getEntityByID(ig.game.enemyArchive[i])!='undefined'){var enemy=ig.game.getEntityByID(ig.game.enemyArchive[i]);if(enemy.pos.y+yScrolling+enemy.size.y<yLevel-(yOffCalib*yScale)&&enemy.pos.y+yScrolling+enemy.size.y>-enemy.size.y){if(enemy.name=="alien1")ig.system.context.fillStyle="blue";if(enemy.name=="alien2")ig.system.context.fillStyle="yellow";ig.system.context.fillRect(((enemy.pos.x*ig.system.scale+(xOffset*xScale))/xScale),(enemy.pos.y+yScrolling)/yScale+yOffset+yOffCalib,(enemy.size.x*ig.system.scale)/xScale,(enemy.size.y*ig.system.scale)/yScale)}}}}
for(i=0,len=ig.game.componentArchive.length;i<=len;i++){if(typeof ig.game.getEntityByID(ig.game.componentArchive[i])!=='undefined'){var compoent;compoent=ig.game.getEntityByID(ig.game.componentArchive[i])
if(compoent.pos.y+yScrolling<yLevel-(yOffCalib*yScale)&&compoent.pos.y+yScrolling+compoent.size.y>-200){ig.system.context.fillRect((((compoent.pos.x*ig.system.scale)+((xOffset)*xScale))/xScale),(compoent.pos.y+yScrolling)/yScale+yOffset+yOffCalib,(compoent.size.x*ig.system.scale)/xScale,(compoent.size.y*ig.system.scale)/yScale)}}}
ig.system.context.stroke();}
if(ig.game.getEntitiesByType(EntitySling)[0].hold==false&&ig.game.gameMode==1){}
if(this.ball.vel.y!=0&&this.ball.freeze==true){}},getAudFX:function(){this.preVfx=window.lerp(this.preVfx,this.Vfx,0.15);return Visualiser.prototype.getAmplitude();}})})

// lib/game/entities/Ball.js
ig.baked=true;ig.module('game.entities.Ball').requires('impact.game','impact.entity').defines(function(){EntityBall=ig.Entity.extend({bluntAmmoSheet:new ig.AnimationSheet('media/ballMorph2.png',27,27),name:'BluntB',ballType:new Array(4),offset:{x:0,y:0},maxVel:{x:1000,y:1000},weight:25,bounciness:0,damage:0,heatlh:10,gravityFactor:1,zIndex:7,maxHeight:0,friction:{x:0,y:0},parOffset:{x:0,y:0},ball:'buntProjectile',imgSize:{x:0,y:0},playerTurn:false,hold:false,grounded:false,sling:null,cam:null,select:null,phyTime:0,hoverDwn:false,freeze:false,orderCol:0,rotAnimT:null,angTrec:0,hitSide:{up:false,down:false,left:false,right:false},expoAnim:new ig.AnimationSheet('media/hitexpo.png',56,57),animExpo:null,init:function(x,y,settings){this.parent(x,y,settings);this.animExpo=new ig.Animation(this.expoAnim,.2,[0]);this.anims.ballspinR=new ig.Animation(this.bluntAmmoSheet,0.1,[0,1,2,3,4,5,6,7,8,9,10,11,12,13]);this.anims.ballspinL=new ig.Animation(this.bluntAmmoSheet,0.1,[13,12,11,10,9,8,7,6,5,4,3,2,1,0]);this.anims.ballidle=new ig.Animation(this.bluntAmmoSheet,0,[7],true);this.rotAnimT=new ig.Timer();this.orderCol=3;this.hold=true;this.currentAnim=this.anims.ballidle},update:function(){this.sling=ig.game.getEntitiesByType(EntitySling)[0];this.cam=ig.game.getEntitiesByType(EntityCamera)[0];this.parent();if(ig.game.prefMode)this.disableAnim=true;this.gravityFactor=1;(this.hold===false&&this.vel.y>0&&this.maxHeight==0)?(this.maxHeight=(1000-this.pos.y)):(this.hold===true)?(this.maxVel.x=0,this.maxVel.y=0):(this.maxHeight=0)
if(this.sling.release===true&&this.vel.y==0&&this.grounded==false){this.vel.y-=(this.sling.maxVelocity)
this.vel.x=this.sling.maxVelocityX;}
if(this.grounded===true&&ig.game.loadedBallType!=ig.game.getEntityByID(this.id)&&this.pos.x+this.pos.y!=this.sling.pos.x+this.sling.pos.y){this.bounciness=0;this.kill();return;}
if(this.freeze==true&&ig.game.loadedBallType!=ig.game.getEntityByID(this.id))
{this.kill();return;}
this.imgSize.x=this.bluntAmmoSheet.width;this.imgSize.y=this.bluntAmmoSheet.height
this.offset.x=0;this.offset.y=0;this.size.x=this.imgSize.x;this.size.y=this.imgSize.y;this.parOffset.x=this.size.x/2;this.parOffset.y=0;this.immunity=false
this.bounciness=.9
if(this.hold===true){this.pos.x=(this.sling.pos.x)-this.parOffset.x;this.pos.y=(this.sling.pos.y);this.weight=40;if(this.sling.release===true){this.damage=50
this.hold=false
this.maxVel.x=50000
this.maxVel.y=60000}}
if(this.vel.y.round(5)===((12/(this.bounciness+1))).round(5)){this.grounded=true;}
if(this.pos.x+this.size.x>=ig.game.gameDimesion.xLevel&&this.vel.x>0){this.vel.x*=-this.bounciness;this.pos.x=ig.game.gameDimesion.xLevel-this.size.x;this.hitSide.right=true;if(this.vel.x<-100)
this.cam.shakeCam(5,0,.4);;}
if(this.pos.x<=0&&this.vel.x<0){this.vel.x*=-this.bounciness;this.pos.x=0;this.hitSide.left=true;if(this.vel.x>100)
this.cam.shakeCam(5,0,.4);}
if(this.vel.x==0||this.freeze){this.rotAnimT.pause();;this.anims.ballidle}else{this.rotAnimT.unpause();if(ig.game.prefMode===false){(this.vel.x<0)?((this.rotAnim(-1)),(this.currentAnim=this.anims.ballspinR)):((this.rotAnim(1)),(this.currentAnim=this.anims.ballspinL));}else{(this.vel.x<0)?((this.rotAnim(-1))):((this.rotAnim(1)));}}
for(i=0,len=ig.game.componentArchive.length;i<len;i++){if(typeof ig.game.componentArchive[i]!=='undefined'){var compoent;compoent=ig.game.getEntityByID(ig.game.componentArchive[i])
this.customCC(compoent,i)}}
if(ig.game.dirInc-1!==-1&&this.pos.x.round(6)===ig.game.colData[ig.game.dirInc-1].posX.round(6)&&this.pos.y.round(6)===ig.game.colData[ig.game.dirInc-1].posY.round(6)&&ig.game.colData[ig.game.dirInc-1].invsX===true){this.vel.x*=-this.bounciness;ig.game.colData[ig.game.dirInc-1].orderOf=null;ig.game.colData[ig.game.dirInc-1].invsX=false;ig.game.colData[ig.game.dirInc-1].posX=0;ig.game.colData[ig.game.dirInc-1].posY=0;ig.game.dirInc--}
if(ig.game.dirInc-1!==-1&&this.pos.x.round(6)===ig.game.colData[ig.game.dirInc-1].posX.round(6)&&this.pos.y.round(6)===ig.game.colData[ig.game.dirInc-1].posY.round(6)&&ig.game.colData[ig.game.dirInc-1].invsY===true){this.vel.y*=-this.bounciness;ig.game.colData[ig.game.dirInc-1].invsY=false;ig.game.colData[ig.game.dirInc-1].orderOf=null;ig.game.colData[ig.game.dirInc-1].posX=0;ig.game.colData[ig.game.dirInc-1].posY=0;ig.game.dirInc--}
if(ig.game.dirInc-1!==-1&&this.pos.x.round(6)===ig.game.colData[ig.game.dirInc-1].posX.round(6)&&this.pos.y.round(6)===ig.game.colData[ig.game.dirInc-1].posY.round(6)&&ig.game.colData[ig.game.dirInc-1].invsVel===true){this.vel.x*=-ig.game.sData[ig.game.colData[ig.game.dirInc-1].orderOf].xBouy;this.vel.y*=-ig.game.sData[ig.game.colData[ig.game.dirInc-1].orderOf].yBouy;this.cam.shakeCam(5,5,.5);var angle=this.angTrec.toDeg();if(angle>90&&angle<215&&this.vel.y<0&&this.vel.x>0)
{this.hitSide.left=true;console.log(""+this.hitSide.left+"|||"+this.hitSide.right);};if(angle>90&&angle<215&&this.vel.y<0&&this.vel.x<0)
{this.hitSide.right=true;console.log(""+this.hitSide.left+"|||"+this.hitSide.right);};if(angle<=180&&this.vel.y>0&&this.vel.x<0||angle<=180&&this.vel.y>0&&this.vel.x>0||angle>180&&this.vel.x>0&&angle<270){this.hitSide.up=true;console.log(""+this.hitSide.up+"|||"+this.hitSide.down);}
ig.game.colData[ig.game.dirInc-1].orderOf=null;ig.game.colData[ig.game.dirInc-1].xBouy=0;ig.game.colData[ig.game.dirInc-1].yBouy=0;ig.game.colData[ig.game.dirInc-1].invsVel=false;ig.game.colData[ig.game.dirInc-1].posX=0;ig.game.colData[ig.game.dirInc-1].posY=0;ig.game.dirInc--}else{}
if(ig.game.killParticles.delta()>2)
{ig.game.killParticles.reset();ig.game.killParticles.pause();}
if(this.pos.y>ig.game.gameDimesion.ground&&this.vel.y>0){this.pos.y=ig.game.gameDimesion.ground
this.vel.y*=-this.bounciness}},rotAnim(speed){this.rotAnimT.unpause();if(!this.dead){var degrees=(this.rotAnimT.delta()*speed);this.currentAnim.angle=((degrees));}},draw:function(){var fpos,angle,calib,bx,by;fpos=ig.game.sData[3];angle=(Math.abs(((Math.atan2((this.pos.x-fpos.posX),(this.pos.y-fpos.posY)))-(180).toRad())));;this.animExpo.angle=angle;this.animExpo.pivot.x=27
this.animExpo.pivot.y=44
this.angTrec=angle;for(i=0;ig.game.colData[i].posX!=0;i++){}
if(ig.game.metamode==true&&this.disableAnim===false){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x/ig.system.scale),this.pos.y-this.offset.y-ig.game._rscreen.y);}}else{if(ig.game.gameMode==1){this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x),this.pos.y-this.offset.y-ig.game._rscreen.y);}}},type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,collides:ig.Entity.COLLIDES.PASSIVE,check:function(other){if(this.immunity==false&&this.freeze==false)other.receiveDamage(this.damage,this);},customCC:function(compoent,i){if(this.touches(compoent)){if(this.pos.x+this.size.x<compoent.pos.x+compoent.size.x&&this.pos.x>=compoent.pos.x){if(this.last.y-this.size.y<compoent.pos.y){this.pos.y=compoent.pos.y-this.size.y}
else{this.pos.y=compoent.pos.y+compoent.size.y}
this.vel.y*=-this.bounciness;}
else if(this.pos.y+this.size.y<compoent.pos.y+compoent.size.y&&this.pos.y>=compoent.pos.y)
{if(this.pos.x<compoent.pos.x+compoent.size.x&&this.pos.x+this.size.x>compoent.pos.x+compoent.size.x){this.pos.x=compoent.pos.x+compoent.size.x}
else
if(this.pos.x+this.size.x>compoent.pos.x&&this.pos.x<compoent.pos.x){this.pos.x=compoent.pos.x-this.size.x}
this.vel.x*=-this.bounciness;}}}})
EntitySlingShot=ig.Entity.extend({offset:{x:221.5,y:80},maxVel:{x:0,y:0},zIndex:0,size:{x:0,y:0},init:function(x,y,settings){this.pos.x=ig.game.gameDimesion.sndSec
this.parent(x,y,settings);},update:function(){var sling=ig.game.getEntitiesByType(EntitySling)[0];},draw:function(){this.parent();if(ig.game.gameMode==1){var sling=ig.game.getEntitiesByType(EntitySling)[0];ig.system.context.lineWidth=4;var startX=ig.system.getDrawPos((sling.pos.x*ig.system.scale)-ig.game._rscreen.x);var startY=ig.system.getDrawPos((sling.pos.y*ig.system.scale)-ig.game._rscreen.y);var endX=ig.system.getDrawPos((this.pos.x-50)-ig.game._rscreen.x);var endY=ig.system.getDrawPos((this.pos.y)-ig.game._rscreen.y);var endX2=ig.system.getDrawPos((this.pos.x+50)-ig.game._rscreen.x);var endY2=ig.system.getDrawPos((this.pos.y)-ig.game._rscreen.y);var tpointX=((sling.pos.x*ig.system.scale)-ig.game._rscreen.x);var tpointY=((sling.pos.y)-(ig.game._rscreen.y))+ig.game.loadedBallType.size.x;var sPointX=(tpointX)*2-(endX2+endX)/2
var sPointY=(tpointY*ig.system.scale)*2-(endY2+endY)/2
ig.system.context.strokeStyle="#FFFFE0";ig.system.context.beginPath();ig.system.context.moveTo(endX2,endY2);ig.system.context.quadraticCurveTo(sPointX,sPointY,endX,endY)
ig.system.context.stroke();ig.system.context.lineWidth=5;ig.system.context.closePath();}}});EntityGhostBall=ig.Entity.extend({init:function(x,y,settings){this.parent(x,y,settings);},update:function(){},draw:function(){},type:ig.Entity.TYPE.NONE,checkAgainst:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,})});

// lib/game/entities/Sling.js
ig.baked=true;ig.module('game.entities.Sling').requires('impact.game','impact.entity').defines(function(){EntitySling=ig.Entity.extend({zIndex:10,unId:null,ballType:null,offset:{x:28,y:0},size:{x:10,y:10},maxVel:{x:20000,y:20000},gravityFactor:0,initalPos:null,potEnergy:null,kenEnergy:null,pull:null,amplitude:{x:0,y:0},frequency:{x:0,y:0},period:0,stiffness:14,magitude:600,hold:false,atRest:false,release:false,delayTrigger:0,stableTrigger:0,initalVel:{x:0,y:0},prePositionY:0,prePositionX:0,sumAmp:[],sAmp:[],prePhys:[],appoxTime:0,appoxHeight:0,maxVelocity:0,maxVelocityX:0,tension:1.5,reliefTime:null,init:function(x,y,settings){this.parent(x,y,settings);this.pos.x=((ig.system.width)/2)-5
this.pos.y=(ig.system.height+(760))
this.reliefTime=new ig.Timer();this.reliefTime.set(this.tension);this.reliefTime.pause();ig.game.spawnEntity("EntitySlingShot",this.pos.x,this.pos.y);this.stableTrigger=new ig.Timer();this.initalPos={x:this.pos.x,y:this.pos.y}
this.pull={x:0,y:0};this.potEnergy={x:0,y:0};this.kenEnergy={x:this.pull.x,y:this.pull.y}
this.vel.y=0;this.vel.x=0;this.prePhys=new Array(3)
for(i=0;i<3;i++){this.prePhys[i]=new Array(70)
for(j=0;j<this.prePhys[i].length;j++){var sPos=new Object();sPos.x=0
sPos.y=0
this.prePhys[i][j]=sPos}}
this.sumAmp=new Array(40)
this.sAmp=new Array(40)
this.stableTrigger.pause()
this.atRest=true
for(i=0;i<this.sumAmp.length;i++)
{var sPos=new Object();sPos.x=0
sPos.y=0
this.sumAmp[i]=sPos}},update:function(){this.parent();var ball;var slingshot=ig.game.getEntitiesByType(EntitySlingShot)[0];this.ballType===null?ig.game.loadedBallType=ig.game.getEntitiesByType(EntityBall)[0]:ig.game.loadedBallType=this.ballType;ball=ig.game.loadedBallType;this.period=(2*Math.PI)/Math.sqrt(this.stiffness/ball.weight)
this.amplitude.y=(((this.pos.y-this.initalPos.y)/this.period)/this.stiffness)
this.amplitude.x=(((this.initalPos.x-this.pos.x)/this.period)/(this.stiffness))
ig.game.reloadBallrdy=(this.atRest===true&&ball.vel.y!=0);if(this.vel.y==0&&this.vel.x==0&&this.hold==false||this.stableTrigger.delta()>=3&&this.hold==false){this.stableTrigger.set(0)
this.stableTrigger.pause()
this.atRest=true;this.frequency.y=0
this.frequency.x=0
this.amplitude.y=0
this.amplitude.x=0
this.vel.y=0;this.vel.x=0;this.hold=false
this.kenEnergy.y=0;this.kenEnergy.x=0;this.potEnergy.x=0
this.potEnergy.y=0
this.pos.y=this.initalPos.y;this.pos.x=this.initalPos.x;this.maxVel.x=0;this.maxVel.y=0;this.reliefTime.set(this.tension);this.reliefTime.pause();}else{this.atRest=false}
this.pos.y>slingshot.pos.y-10?(this.offset.y=-18):(this.offset.y=18);if(this.hold==false&&this.atRest==false&&ball.vel.y==0)
{this.pos.x=this.prePositionX
this.pos.y=this.prePositionY
this.ballType.pos.x=this.prePositionX
this.ballType.pos.y=this.prePositionY
this.release=true;}
else if(ball.vel.y!=0||ball.vel.y==0&&ball.stick2Wall==true)this.release=false;if(ig.game.gameMode==1){ig.input.pressed('click')&&this.atRest==true?(this.hold=this._inParameter(),this.vel.x=0,this.vel.y=0,this.frequency.x=0,this.frequency.y=0):(ig.input.released('click')&&this.pos.y>=this.initalPos.y)?(this.hold=false,this.pull.y=(this.pos.y-this.initalPos.y)):(this.vel.y=this.vel.y);(ig.input.released('click')&&this.pos.x>this.initalPos.x)?(this.pull.x=(this.pos.x-this.initalPos.x)):(ig.input.released('click')&&this.pos.x<this.initalPos.x)?(this.pull.x=(this.initalPos.x-this.pos.x)):(this.pull.x=this.pull.x)}
if(this.hold==true)
{this.potEnergy.y=(this.pos.y-this.initalPos.y);this.potEnergy.x=(this.pos.x-this.initalPos.x);this.appoxTime=(-this.maxVelocity/300);var mouse={x:(ig.game.screen.x+ig.input.mouse.x),y:(ig.game.screen.y+ig.input.mouse.y)}
var angle=0.001;if(mouse.x>this.initalPos.x&&this.pos.x>this.initalPos.x){angle=Math.abs(((Math.atan2((mouse.x-this.initalPos.x),(mouse.y-this.initalPos.y)))-(0).toRad())).toDeg();}
if(mouse.x<this.initalPos.x&&this.pos.x>this.initalPos.x){angle=-2;;}
if(mouse.x<this.initalPos.x&&this.pos.x<this.initalPos.x){angle=Math.abs(((Math.atan2((this.initalPos.x-mouse.x),(mouse.y-this.initalPos.y)))-(0).toRad())).toDeg();}
if(mouse.x>this.initalPos.x&&this.pos.x<this.initalPos.x){angle=-1;}
var dist=Math.sqrt(Math.pow((this.pos.x-(ig.game.screen.x+ig.input.mouse.x)),2)+
Math.pow((this.pos.y-(ig.game.screen.y+ig.input.mouse.y)),2));var dist2=Math.sqrt(Math.pow(((this.pos.x)-this.initalPos.x),2)+
Math.pow(((this.pos.y)-this.initalPos.y),2));var dist3=Math.sqrt(Math.pow((this.initalPos.x-(ig.game.screen.x+ig.input.mouse.x)),2)+
Math.pow((this.initalPos.y-(ig.game.screen.y+ig.input.mouse.y)),2));var dist4={x:Math.abs(this.initalPos.x-(ig.game.screen.x+ig.input.mouse.x)),y:Math.abs(this.initalPos.y-(ig.game.screen.y+ig.input.mouse.y))}
var posAdis={y:(dist2)*Math.cos(angle.toRad()),x:(dist2)*Math.sin(angle.toRad())};if(this.pos.x<this.initalPos.x)posAdis.x*=-1;if(this.pos.x>this.initalPos.x)Math.abs(posAdis.x);if(dist3<110){this.pos.x=ig.game.screen.x+(ig.input.mouse.x);this.pos.y=ig.game.screen.y+(ig.input.mouse.y);}else{this.pos.x=posAdis.x+(this.initalPos.x);this.pos.y=posAdis.y+(this.initalPos.y);}
this.initalVel.y=-1*((this.potEnergy.y+(this.amplitude.y*this.potEnergy.y))*this.magitude)/ball.weight
this.initalPos.x<this.pos.x?(this.initalVel.x=-1*((this.potEnergy.x-(this.amplitude.x*this.potEnergy.x))*this.magitude)/ball.weight):(this.initalVel.x=((this.potEnergy.x+(this.amplitude.x*this.potEnergy.x))*this.magitude)/ball.weight)}
else if(this.hold==false)
{this.stableTrigger.unpause()
this.maxVel.x=Infinity;this.maxVel.y=Infinity;this.frequency.x-=-this.amplitude.x;this.frequency.y-=this.amplitude.y;this.kenEnergy.y=this.pull.y*(this.frequency.y);this.kenEnergy.x=this.pull.x*(this.frequency.x);this.vel.x=((this.magitude*((this.kenEnergy.x)-(this.potEnergy.x)))/ball.weight);this.vel.y=((-this.magitude*((this.potEnergy.y)-(this.kenEnergy.y)))/ball.weight);}
if(this.hold==false&&this.pos.y!=this.initalPos.y){}
if(this.hold==false){this.potEnergy.y=(this.pos.y-this.initalPos.y);this.potEnergy.x=(this.pos.x-this.initalPos.x);}
var sumOf=0;if(this.hold==true){this.sumAmp[0].y=this.amplitude.y
this.prePhys[1][0].y=-this.initalVel.y
this.prePhys[2][0].y=this.potEnergy.y
this.prePhys[0][0].y=this.amplitude.y
this.prePhys[2][1].y=(this.prePhys[2][0].y)-(this.prePhys[1][0].y*.04)
this.prePhys[0][1].y=(this.prePhys[2][1].y)/this.period/this.stiffness
this.sumAmp[1].y=this.sumAmp[0].y+this.prePhys[0][1].y
this.prePhys[1][1].y=((this.prePhys[2][0].y)+((this.prePhys[2][0].y)*this.sumAmp[1].y))*this.magitude/ball.weight
for(i=2;i<10;i++)
{this.prePhys[2][i].y=(this.prePhys[2][i-1].y)-(this.prePhys[1][i-1].y*.04)
this.prePhys[0][i].y=(this.prePhys[2][i].y)/this.period/this.stiffness
this.sumAmp[i].y=this.sumAmp[i-1].y+this.prePhys[0][i].y
this.prePhys[1][i].y=((this.prePhys[2][i-1].y)+((this.prePhys[2][0].y)*this.sumAmp[i].y))*this.magitude/ball.weight}
for(i=1;i<this.prePhys[0].length;i++){if(typeof this.prePhys[1][i].y!='undefined'){(this.prePhys[1][i].y>this.prePhys[1][i-1].y)?(this.maxVelocity=this.prePhys[1][i].y,this.prePositionY=this.prePhys[2][i].y+1000):(this.maxVelocity=this.prePhys[1][i-1].y,this.prePositionY=this.prePhys[2][i-1].y+1000)}
else{this.maxVelocity=this.prePhys[1][i-1].y;this.prePositionY=this.prePhys[2][i-1].y+1000;break;}
if(this.prePhys[1][i-1].y>this.prePhys[1][i].y)break;}
if(this.potEnergy.x<0){this.sumAmp[0].x=this.amplitude.x
this.prePhys[1][0].x=this.initalVel.x
this.prePhys[2][0].x=-this.potEnergy.x
this.prePhys[0][0].x=this.amplitude.x
this.prePhys[2][1].x=(this.prePhys[2][0].x)+(this.prePhys[1][0].x*.04)
this.prePhys[0][1].x=(this.prePhys[2][1].x)/this.period/this.stiffness
this.sumAmp[1].x=this.sumAmp[0].x+this.prePhys[0][1].x
this.prePhys[1][1].x=((this.prePhys[2][0].x)+((this.prePhys[2][0].x)*this.sumAmp[1].x))*this.magitude/ball.weight
for(i=2;i<10;i++){this.prePhys[2][i].x=(this.prePhys[2][i-1].x)-(this.prePhys[1][i-1].x*.04)
this.prePhys[0][i].x=(this.prePhys[2][i].x)/this.period/this.stiffness
this.sumAmp[i].x=this.sumAmp[i-1].x+this.prePhys[0][i].x
this.prePhys[1][i].x=((this.prePhys[2][i-1].x)+((-this.potEnergy.x)*this.sumAmp[i].x))*this.magitude/ball.weight}}
if(this.potEnergy.x>0){this.sumAmp[0].x=this.amplitude.x
this.prePhys[1][0].x=this.initalVel.x
this.prePhys[2][0].x=this.potEnergy.x
this.prePhys[0][0].x=-this.amplitude.x
this.prePhys[2][1].x=((this.prePhys[2][0].x)+(this.prePhys[1][0].x*.04))
this.prePhys[0][1].x=(-this.prePhys[2][1].x)/this.period/this.stiffness
this.sumAmp[1].x=this.sumAmp[0].x+this.prePhys[0][1].x
this.prePhys[1][1].x=((-this.prePhys[2][0].x)+((this.prePhys[2][0].x)*this.sumAmp[1].x))*this.magitude/ball.weight
for(i=2;i<10;i++){this.prePhys[2][i].x=((this.prePhys[2][i-1].x)+(this.prePhys[1][i-1].x*.04))
this.prePhys[0][i].x=(-this.prePhys[2][i].x)/this.period/this.stiffness
this.sumAmp[i].x=this.sumAmp[i-1].x+this.prePhys[0][i].x
this.prePhys[1][i].x=((-this.prePhys[2][i-1].x)+((this.potEnergy.x)*this.sumAmp[i].x))*this.magitude/ball.weight}}
for(i=1;i<this.prePhys[0].length;i++){if(typeof this.prePhys[1][i].x!='undefined'){(Math.abs(this.prePhys[1][i].x)>Math.abs(this.prePhys[1][i-1].x))?(this.maxVelocityX=this.prePhys[1][i-1].x,this.prePositionX=Math.abs(this.prePhys[2][i-1].x-ig.game.gameDimesion.sndSec)):(this.maxVelocityX=this.prePhys[1][i-1].x,this.prePositionX=Math.abs(this.prePhys[2][i-1].x-ig.game.gameDimesion.sndSec))}
else{this.maxVelocityX=this.prePhys[1][i-1].x;this.prePositionX=Math.abs(this.prePhys[2][i-1].x-ig.game.gameDimesion.sndSec);break;}
if(Math.abs(this.prePhys[1][i-1].x)>Math.abs(this.prePhys[1][i].x))break;}}
var a,b,c,d,e,f,g,eSum,h,k,z,x,i;eSum=[]
z=0
x=800
f=0
h=12
k=.48
if(this.vel.y==0){for(i=1;;i++)
{a=(0.04*i)
b=(0.04*i)*ig.game.gravity-this.maxVelocity
c=k-((((h*i)/h))*.04)
d=(a*11-c)
if((i)*h>this.maxVelocity-12){e=(a*(h-b)+f)
break;}
else{if(i*h>=h*3)f+=d;}}
this.appoxHeight=((this.prePositionY-1000)-e)*-1}},type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,_inParameter:function(){var ball=ig.game.loadedBallType;if(this.atRest&&ball.vel.y==0){return(ig.input.mouse.x+ig.game.screen.x>this.pos.x-24&&ig.input.mouse.x+ig.game.screen.x<this.pos.x+48&&ig.input.mouse.y+ig.game.screen.y>this.pos.y&&ig.input.mouse.y+ig.game.screen.y<this.pos.y+48)}},check:function(other)
{if(other.vel.y==0){this.unId=other.id
this.ballType=ig.game.getEntityByID(this.unId)}},});});

// lib/impact/entity-pool.js
ig.baked=true;ig.module('impact.entity-pool').requires('impact.game').defines(function(){"use strict";ig.EntityPool={pools:{},mixin:{staticInstantiate:function(x,y,settings){return ig.EntityPool.getFromPool(this.classId,x,y,settings);},erase:function(){ig.EntityPool.putInPool(this);}},enableFor:function(Class){Class.inject(this.mixin);},getFromPool:function(classId,x,y,settings){var pool=this.pools[classId];if(!pool||!pool.length){return null;}
var instance=pool.pop();instance.reset(x,y,settings);return instance;},putInPool:function(instance){if(!this.pools[instance.classId]){this.pools[instance.classId]=[instance];}
else{this.pools[instance.classId].push(instance);}},drainPool:function(classId){delete this.pools[classId];},drainAllPools:function(){this.pools={};}};ig.Game.inject({loadLevel:function(data){ig.EntityPool.drainAllPools();this.parent(data);}});});

// lib/game/entities/Alien.js
ig.baked=true;ig.module('game.entities.Alien').requires('impact.entity','impact.entity-pool').defines(function(){EntityAlien=ig.Entity.extend({name:"alien1",hitDelay:null,pushDelay:null,gravityFactor:0,invincible:false,push:false,size:{x:50,y:50},offset:{x:0,y:0},maxVel:{x:0,y:0},health:200,speed:0,hoverDwn:false,dead:false,invtXvel:false,weight:100,eColor:"blue",zIndex:0,envade:false,ballType:null,unId:null,magId:-1,enlisted:false,targeted:false,init:function(x,y,settings){this.parent(x,y,settings);this.hitDelay=new ig.Timer();this.pushDelay=new ig.Timer();this.pos.y=-10000+((this.id%6))*140;this.pos.x=(((this.id%5)*130));this.hitDelay.pause();this.pushDelay.pause();ig.game.countEnemy+=1},reset:function(x,y,settings){this.parent(x,y,settings);},update:function(x,y,settings){this.parent();for(i=0;this.enlisted==false;i++)
{if(typeof ig.game.enemyArchive[i]==='undefined'&&this.enlisted==false){ig.game.enemyArchive[i]=this.id;this.enlisted=true}}
if(this.ballType!=null){if(this.touches(this.ballType)===true){this.eColor="black"}else{}}
if(this.hitDelay!=null&&this.hitDelay.delta()>1){this.invincible=false;this.hitDelay.pause();}
if(this.hoverDwn===true&&this.dead==false){this.monsterDecend(400)
this.maxVel.y=1000;this.maxVel.x=70}else
{this.maxVel.y=0;this.vel.y=0;this.maxVel.x=0;}
if(this.hoverDwn===true&&this.dead===true)
{this.maxVel.y=1000;this.vel.y=1000}
if(this.pos.x+this.size.x>ig.game.gameDimesion.xLevel){this.invtXvel=true
this.pos.x=ig.game.gameDimesion.xLevel-this.size.x}
if(this.pos.x<0){this.invtXvel=false}
if(this.magnetized)this.invtXvel=false;this.invtXvel?this.vel.x=-70:this.vel.x=70;if(this.pos.y>720&&this.envade==false){ig.game.stats.penalty+=1;this.envade=true;ig.game.stats.points-=100;ig.game.cRundPoints-=100;}},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NONE,handleMovementTrace:function(res)
{this.parent(res);if(res.collision.x||res.collision.y||this.pos.y>1100){this.kill();ig.game.stats.points+=100;ig.game.cRundPoints+=100;ig.game.countEnemy--;return;}},draw:function(){ig.system.context.beginPath();ig.system.context.fillStyle=this.eColor;ig.system.context.fillRect((((this.pos.x*ig.system.scale)-ig.game._rscreen.x)),((this.pos.y-ig.game._rscreen.y)*ig.system.scale),this.size.x*ig.system.scale,this.size.y*ig.system.scale);ig.system.context.stroke();},receiveDamage:function(value)
{if(this.health-value<=0)
{ig.game.comboReset.set(1)
ig.game.comboCount+1
this.eColor="black";this.hoverDwn=true
this.dead=true;this.invincible=true
this.magnetized=false;this.maxVel.y=200
this.maxVel.x=0
this.vel.y=200}
if(this.invincible===false)
{this.eColor="white"
ig.game.comboReset.set(1)
ig.game.comboCount+=1
ig.game.stats.points+=10*ig.game.comboCount
ig.game.cRundPoints+=10*ig.game.comboCount
this.parent(value);this.makeInvincible();}else
{return;}},check:function(other)
{this.unId=other.id
this.ballType=ig.game.getEntityByID(this.unId)},monsterDecend(hvrDwn){this.magnetized=false
this.accel.y=hvrDwn/2;if(this.vel.y>hvrDwn)
{this.hoverDwn=false;return;}},makeInvincible(){this.invincible=true
this.hitDelay.reset();},});})

// lib/game/entities/Alienn.js
ig.baked=true;ig.module('game.entities.Alienn').requires('impact.game','impact.entity','game.entities.Alien').defines(function(){EntityAlienn=EntityAlien.extend({name:"alien2",eColor:"yellow",init:function(x,y,settings){this.parent(x,y,settings);},})})

// lib/game/entities/Monster0.js
ig.baked=true;ig.module('game.entities.Monster0').requires('impact.entity','impact.entity-pool').defines(function(){EntityMonster0=ig.Entity.extend({name:"monster0",animSheet:new ig.AnimationSheet('media/monster1.png',50,50),deathSheet:new ig.AnimationSheet('media/boom.png',50,50),hitDelay:null,pushDelay:null,rotAnimT:null,gravityFactor:0,invincible:false,push:false,size:{x:50,y:50},offset:{x:0,y:0},maxVel:{x:0,y:0},health:101,speed:0,hoverDwn:false,dead:false,invtXvel:false,weight:100,eColor:"blue",zIndex:0,envade:false,ballType:null,unId:null,magId:-1,enlisted:false,targeted:false,monImg:new ig.Image("media/monster1.png"),mod:0,drawM:null,init:function(x,y,settings){this.parent(x,y,settings);this.hitDelay=new ig.Timer();this.pushDelay=new ig.Timer();this.rotAnimT=new ig.Timer();this.size={x:50,y:50};var modS=(ig.game.rSpawnManagement[ig.game.roundNum][0][1])/(10);var col=(ig.game.spawnQuery[ig.game.wave]/8).floor();(this.id%2==0)?this.mod=1:this.mod=-1;this.pos.x=(((this.id%(5))*50));this.pos.y=(-10000)+((this.id%(6))*(130));if(this.pos.x==50||this.pos.x==150)this.pos.y+=50;if(this.pos.x==100||this.pos.x==200)this.pos.y+=100;this.hitDelay.pause();this.pushDelay.pause();this.rotAnimT.pause();ig.game.countEnemy+=1
this.addAnim('idle',.3,[0,1,2]);this.addAnim('idle2',0,[0],true);this.addAnim('hit',0.3,[4,3]);this.addAnim('dead',0.3,[4,5,4],true);this.anims.dead=new ig.Animation(this.deathSheet,0.3,[0,1,2,3,4]);this.currentAnim=this.anims.idle},reset:function(x,y,settings){this.parent(x,y,settings);},update:function(x,y,settings){this.parent();if(ig.game.prefMode==true){this.disableAnim=true;}else{this.disableAnim=false;}
for(i=0;this.enlisted==false;i++)
{if(typeof ig.game.enemyArchive[i]==='undefined'&&this.enlisted==false){ig.game.enemyArchive[i]=this.id;this.enlisted=true}}
if(!this.dead)
{if(this.ballType!=null){this.freeze=ig.game.loadedBallType.freeze;if(ig.game.loadedBallType.freeze===false&&this.touches(this.ballType)===true){this.hitDelay.unpause()
this.eColor="black"}else if(ig.game.loadedBallType.freeze===true&&this.touches(this.ballType)===true){this.hitDelay.pause();}}
if(this.hitDelay!=null&&this.hitDelay.delta()>2){this.invincible=false;this.hitDelay.reset();this.hitDelay.pause();this.rotAnimT.reset();this.rotAnimT.pause();this.anims.hit.rewind();if(this.currentAnim!==this.anims.idle)ig.game.countHits--;this.currentAnim=this.anims.idle}
if(this.hitDelay.delta()<2&&this.hitDelay.delta()!==0){if(this.currentAnim!==this.anims.hit)
ig.game.countHits++;this.currentAnim=this.anims.hit;this.rotAnim();}}
if(this.hoverDwn===true&&this.dead==false){this.monsterDecend(700)
this.maxVel.y=1000;this.maxVel.x=1000;}else
{this.maxVel.y=0;this.vel.y=0;this.maxVel.x=0;}
if(this.dead)this.rotAnim();if(this.hoverDwn===true&&this.dead===true&&this.currentAnim.angle>3.08)
{this.maxVel.y=2000;this.vel.y=2000;this.accel.y=1000;}
if(this.pos.x+this.size.x>ig.game.gameDimesion.xLevel){this.invtXvel=true
this.pos.x=ig.game.gameDimesion.xLevel-this.size.x}
if(this.pos.x<0){this.invtXvel=false}
if(this.magnetized)this.invtXvel=false;this.invtXvel?this.vel.x=-100:this.vel.x=100;if(this.pos.y>(1000+ig.game.penaltyLine)&&this.envade==false){ig.game.stats.penalty+=1;this.envade=true;ig.game.stats.points-=(ig.game.stats.points*.10);ig.game.cRundPoints-=100;this.kill();ig.game.countEnemy--;}},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,handleMovementTrace:function(res)
{this.parent(res);if(res.collision.x||res.collision.y||this.pos.y>1100){this.kill();ig.game.stats.points+=100;ig.game.cRundPoints+=100;ig.game.countEnemy--;return;}},draw:function(){if(ig.game.metamode==true){if(this.currentAnim){this.off=ig.game.sData[ig.game.plotter.select].posX
if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x/ig.system.scale),this.pos.y-this.offset.y-ig.game._rscreen.y);}
if(this.disableAnim==false){this.currentAnim.update();}}}else{this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x),this.pos.y-this.offset.y-ig.game._rscreen.y);}},returnHit(){ig.game.countHits++;return;},rotAnim(){this.rotAnimT.unpause();if(!this.dead){var speed=6;var degrees=(this.rotAnimT.delta()*speed);this.currentAnim.angle=(Math.sin(degrees));}else{if(this.currentAnim.frame==4&&this.currentAnim.loopCount>0){ig.game.countEnemy--;this.kill();}
if(this.disableAnim){ig.game.countEnemy--;this.kill();}}},receiveDamage:function(value)
{if(this.health-value<=0&&!this.dead)
{ig.game.comboReset.set(1);ig.game.comboCount+=1;this.currentAnim.rewind();this.currentAnim=this.anims.dead;this.eColor="black";this.hoverDwn=true
this.dead=true;this.invincible=true
this.magnetized=false;this.maxVel.y=200
this.maxVel.x=0
this.vel.y=200
ig.game.stats.points+=10*ig.game.comboCount}
if(this.invincible===false)
{this.eColor="white"
ig.game.comboReset.set(1)
ig.game.comboCount+=1
ig.game.stats.points+=10*ig.game.comboCount
ig.game.cRundPoints+=10*ig.game.comboCount
this.parent(value);this.makeInvincible();}else
{return;}},check:function(other)
{this.unId=other.id
this.ballType=ig.game.getEntityByID(this.unId)},monsterDecend(hvrDwn){this.magnetized=false
this.accel.y=hvrDwn/2;if(this.vel.y>hvrDwn)
{this.hoverDwn=false;return;}},makeInvincible(){this.invincible=true},});})

// lib/game/entities/Monster1.js
ig.baked=true;ig.module('game.entities.Monster1').requires('impact.entity-pool','impact.entity','game.entities.Monster0').defines(function(){EntityMonster1=EntityMonster0.extend({name:"monster1",animSheet:new ig.AnimationSheet('media/monster2.png',50,50),eColor:"yellow",init:function(x,y,settings){this.parent(x,y,settings);},})})

// lib/game/entities/Component.js
ig.baked=true;ig.module('game.entities.Component').requires('impact.game','impact.entity').defines(function(){EntityPlatform=ig.Entity.extend({xSize:0,ySize:0,size:{x:0,y:0},offset:{x:0,y:0},maxVel:{x:0,y:0},gravityFactor:0,zIndex:0,enlisted:false,init:function(x,y,settings){this.parent(x,y,settings);this.size.x=this.xSize;this.size.y=this.ySize;},update:function(){for(i=0;this.enlisted==false;i++)
{if(typeof ig.game.componentArchive[i]==='undefined'&&this.enlisted==false){ig.game.componentArchive[i]=this.id;this.enlisted=true}}
this.parent();},draw:function(){ig.system.context.beginPath();ig.system.context.fillStyle="red";ig.system.context.fillRect((((this.pos.x*ig.system.scale)-ig.game._rscreen.x)),((this.pos.y-ig.game._rscreen.y)*ig.system.scale),this.size.x*ig.system.scale,this.size.y*ig.system.scale);ig.system.context.stroke();},check:function(other){},});})

// lib/game/entities/MonsterA.js
ig.baked=true;ig.module('game.entities.MonsterA').requires('impact.entity','impact.entity-pool').defines(function(){EntityMonsterA=ig.Entity.extend({animSheet:new ig.AnimationSheet('media/monster1.png',50,50),deathSheet:new ig.AnimationSheet('media/boom.png',50,50),init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',.3,[0,1,2]);this.addAnim('idle2',.3,[0]);this.addAnim('hit',0.3,[3,4]);this.addAnim('dead',0.3,[4,5,4],true);this.anims.dead=new ig.Animation(this.deathSheet,0.3,[0,1,2,3,4]);this.vel.y=20;},update:function(x,y,settings){this.parent();},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NONE,handleMovementTrace:function(res)
{this.parent(res);if(res.collision.x||res.collision.y||this.pos.y>1100){this.kill();ig.game.stats.points+=100;ig.game.cRundPoints+=100;ig.game.countEnemy--;return;}},});})

// lib/game/entities/Boss1.js
ig.baked=true;ig.module('game.entities.Boss1').requires('impact.entity').defines(function(){EntityBoss1=ig.Entity.extend({name:"Boss1",animSheet:new ig.AnimationSheet('media/BOSS1.png',200,200),deathSheet:new ig.AnimationSheet('media/boom.png',50,50),hitDelay:null,pushDelay:null,rotAnimT:null,gravityFactor:0,invincible:false,push:false,size:{x:50,y:50},offset:{x:0,y:0},maxVel:{x:0,y:0},health:101,speed:0,hoverDwn:false,dead:false,invtXvel:false,weight:100,eColor:"blue",zIndex:5,ballType:null,spawn:false,enlisted:false,drawM:null,death:false,healthBar:new Image(125,100),init:function(x,y,settings){this.parent(x,y,settings);this.healthBar.src='media/bHBar.png'
this.hitDelay=new ig.Timer();this.pushDelay=new ig.Timer();this.rotAnimT=new ig.Timer();this.size={x:200,y:200};this.addAnim('idle',.3,[0,1,2]);this.addAnim('hit',.3,[3,4]);this.addAnim('death',.3,[5,6,7,8]);this.addAnim('end',0.3,[9,10,11,12,13,14,15])
this.currentAnim=this.anims.idle},update:function(x,y,settings){this.parent();if(ig.game.prefMode==true){this.disableAnim=true;}else{this.disableAnim=false;}
for(i=0;this.enlisted==false;i++)
{if(typeof ig.game.enemyArchive[i]==='undefined'&&this.enlisted==false){ig.game.enemyArchive[i]=this.id;this.enlisted=true}}
if(this.death==false){if(this.spawn==false){ig.game.spawnEntity("EntityBjewels",(this.pos.x-this.size.x)+16,this.pos.y+82,{number:1});ig.game.spawnEntity("EntityBjewels",(this.pos.x-this.size.x)+168,this.pos.y+82,{number:2});ig.game.spawnEntity("EntityBjewels",(this.pos.x-this.size.x)+92,this.pos.y+60,{number:3});ig.game.spawnEntity("EntityBjewels",(this.pos.x-this.size.x)+44,this.pos.y+148,{number:4});ig.game.spawnEntity("EntityBjewels",(this.pos.x-this.size.x)+140,this.pos.y+148,{number:5});this.spawn=true;}
if(ig.game.reloaded==true){ig.game.getEntitiesByType(EntityBjewels)[0].hit=false;;ig.game.getEntitiesByType(EntityBjewels)[1].hit=false;;ig.game.getEntitiesByType(EntityBjewels)[2].hit=false;;ig.game.getEntitiesByType(EntityBjewels)[3].hit=false;;ig.game.getEntitiesByType(EntityBjewels)[4].hit=false;;this.invincible=false
ig.game.reloaded=false;}
if(ig.game.getEntitiesByType(EntityBjewels)[0].hit==true&&ig.game.getEntitiesByType(EntityBjewels)[1].hit==true&&ig.game.getEntitiesByType(EntityBjewels)[2].hit==true&&ig.game.getEntitiesByType(EntityBjewels)[3].hit==true&&ig.game.getEntitiesByType(EntityBjewels)[4].hit==true){this.currentAnim=this.anims.hit;if(this.invincible==false)
this.health-=100;this.invincible=true}else{this.currentAnim=this.anims.idle;}
if(this.health==1){if(this.currentAnim.loopCount>0){this.currentAnim.rewind();}
this.currentAnim=this.anims.death;ig.game.gameMode=4;}}
if(this.death==true){this.currentAnim=this.anims.end;if(this.currentAnim.frame==6&&this.currentAnim.loopCount>0){console.log("here");ig.game.index++;ig.game.countEnemy--;ig.game.bossKill=true;this.kill();}}
if(this.hoverDwn===true&&this.dead==false){this.monsterDecend(700)
this.maxVel.y=1000;this.maxVel.x=1000;}else
{this.maxVel.y=0;this.vel.y=0;this.maxVel.x=0;}
if(this.dead)this.rotAnim();if(this.hoverDwn===true&&this.dead===true&&this.currentAnim.angle>3.08)
{this.maxVel.y=2000;this.vel.y=2000;this.accel.y=1000;}
if(this.pos.x+this.size.x>ig.game.gameDimesion.xLevel){this.invtXvel=true
this.pos.x=ig.game.gameDimesion.xLevel-this.size.x}
if(this.pos.x<0){this.invtXvel=false}
if(this.magnetized)this.invtXvel=false;this.invtXvel?this.vel.x=-100:this.vel.x=100;if(this.pos.y>(1000+ig.game.penaltyLine)&&this.envade==false){ig.game.stats.penalty+=1;this.envade=true;ig.game.stats.points-=(ig.game.stats.points*.10);ig.game.cRundPoints-=100;this.kill();ig.game.countEnemy--;}},type:ig.Entity.TYPE.NONE,checkAgainst:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,draw:function(){if(ig.game.metamode==true){if(this.currentAnim){this.off=ig.game.sData[ig.game.plotter.select].posX
if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x/ig.system.scale),this.pos.y-this.offset.y-ig.game._rscreen.y);}
if(this.disableAnim==false){this.currentAnim.update();}}}else{this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x),this.pos.y-this.offset.y-ig.game._rscreen.y);}
ig.system.context.fillRect(((this.pos.x*(ig.system.scale))-(ig.game._rscreen.x))+100,((this.pos.y-ig.game._rscreen.y)*ig.system.scale)-50,(this.health-1)*2,50);ig.system.context.drawImage(this.healthBar,((this.pos.x*(ig.system.scale))-(ig.game._rscreen.x))+100,((this.pos.y-ig.game._rscreen.y)*ig.system.scale)-50);},rotAnim(){this.rotAnimT.unpause();if(!this.dead){var speed=6;var degrees=(this.rotAnimT.delta()*speed);this.currentAnim.angle=(Math.sin(degrees));}else{if(this.currentAnim.frame==4&&this.currentAnim.loopCount>0){ig.game.countEnemy--;this.kill();}
if(this.disableAnim){ig.game.countEnemy--;this.kill();}}},receiveDamage:function(value){if(this.health-value<=0&&!this.dead)
{}},check:function(other){this.unId=other.id
this.ballType=ig.game.getEntityByID(this.unId)},monsterDecend(hvrDwn){this.magnetized=false
this.accel.y=hvrDwn/2;if(this.vel.y>hvrDwn)
{this.hoverDwn=false;return;}},makeInvincible(){this.invincible=true},});EntityBjewels=ig.Entity.extend({animSheet:new ig.AnimationSheet('media/jewels.png',16,16),gravityFactor:0,number:0,hit:false,zIndex:4,health:1000,init:function(x,y,settings){this.parent(x,y,settings);this.addAnim('idle',0,[0,1],true);this.addAnim('hit',1,[1],true);this.currentAnim=this.anims.idle;this.currentAnim.frame=0;this.currentAnim.rewind();},update:function(x,y,settings){this.parent();var boss=ig.game.getEntitiesByType(EntityBoss1)[0];if(this.number===1){this.pos.x=(boss.pos.x)+16;this.pos.y=boss.pos.y+82;}
if(this.number===2){this.pos.x=(boss.pos.x)+168;this.pos.y=boss.pos.y+82;}
if(this.number===3){this.pos.x=(boss.pos.x)+92;this.pos.y=boss.pos.y+60;}
if(this.number===4){this.pos.x=(boss.pos.x)+44;this.pos.y=boss.pos.y+148;}
if(this.number===5){this.pos.x=(boss.pos.x)+140;this.pos.y=boss.pos.y+148;}
if(boss.death==true)this.kill();if(this.hit==true){this.currentAnim.frame=1;}
if(this.hit==false){this.currentAnim.rewind();this.currentAnim.frame=0;}},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,draw:function(){if(ig.game.metamode==true){if(this.currentAnim){this.off=ig.game.sData[ig.game.plotter.select].posX
if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x/ig.system.scale),this.pos.y-this.offset.y-ig.game._rscreen.y);}
if(this.disableAnim==false){this.currentAnim.update();}}}else{this.currentAnim.draw(this.pos.x-this.offset.x-(ig.game._rscreen.x),this.pos.y-this.offset.y-ig.game._rscreen.y);}},check:function(other){this.health=1000;this.hit=true;},});})

// lib/game/levels/testlvl.js
ig.baked=true;ig.module('game.levels.testlvl').requires('game.entities.Camera','game.entities.Ball','game.entities.Sling','game.entities.Alien','game.entities.Alienn','game.entities.Monster0','game.entities.Monster1','game.entities.Component','game.entities.MonsterA','game.entities.Boss1').defines(function(){LevelTestlvl={"entities":[{"type":"EntityCamera","x":1050,"y":1000},{"type":"EntityBall","x":1050,"y":916},{"type":"EntitySling","x":1050,"y":1000}],"layer":[{"name":"atmosphere","width":30,"height":20,"linkWithCollision":false,"visible":0,"tilesetName":"","repeat":false,"preRender":false,"distance":"0","tilesize":60,"foreground":false,"data":[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}]};});

// lib/plugins/animation-scaling.js
ig.baked=true;ig.module('plugins.animation-scaling').requires('impact.animation').defines(function(){ig.Animation.inject({scale:{x:1,y:1},draw:function(targetX,targetY){var scale=ig.system.scale;ig.system.context.save();var originX=targetX+(this.sheet.width/2);var originY=targetY+(this.sheet.height/2);ig.system.context.translate(originX*scale,originY*scale);ig.system.context.scale(this.scale.x,this.scale.y);ig.system.context.translate(-originX*scale,-originY*scale);this.parent(targetX,targetY);ig.system.context.restore();}});});

// lib/game/entities/particle-fast.js
ig.baked=true;ig.module('game.entities.particle-fast').requires('impact.entity','impact.entity-pool').defines(function(){EntityParticleFast=ig.Entity.extend({image:new ig.Image('media/particle.png',13,13),size:{x:13,y:13},vel:{x:0,y:0},draw:function(){ig.system.context.drawImage(this.image.data,(this.pos.x+this.size.x)-(ig.game._rscreen.x),(this.pos.y+this.size.y)-ig.game._rscreen.y);},init:function(x,y,settings){this.parent(x,y,settings);},update:function(){this.parent();},reset:function(x,y,settings){this.parent(x,y,settings);},});ig.EntityPool.enableFor(EntityParticleFast);});

// lib/game/particles-fast.js
ig.baked=true;ig.module('game.particles-fast').requires('impact.game','game.entities.particle-fast').defines(function(){ParticleTestFast=ig.Game.extend({TOTAL_PARTICLES:500,init:function(){this.spawnParticles(this.TOTAL_PARTICLES);},checkParticleCount:function(count){if(this.entities.length<count){this.spawnParticles(count-this.entities.length);}else if(this.entities.length>count){this.entities.length=count;}},spawnParticles:function(count){var particleWidth=EntityParticleFast.prototype.size.x;var particleHeight=EntityParticleFast.prototype.size.y;for(var i=0;i<count;i++){this.entities.push(new EntityParticleFast(Math.random()*(ig.system.width-particleWidth),Math.random()*(ig.system.height-particleHeight)));}},removeParticles:function(){},run:function(){this.checkParticleCount(~~this.TOTAL_PARTICLES);ig.system.context.clearRect(0,0,ig.system.realWidth,ig.system.realHeight);for(var i=0,len=this.entities.length;i<len;i++){var ent=this.entities[i];ent.update();ent.draw();}}});});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('impact.game','game.gui_Moderator','game.levels.movietest','game.levels.testlvl','plugins.animation-scaling','game.particles-fast','plugins.impact-storage').defines(function(){var storage=new ig.Storage();storage.initUnset('round',0);storage.initUnset('points',0);storage.initUnset('gameMode',0);MyGame=ig.Game.extend({gameDimesion:{tilesize:0,xLevel:0,yLevel:0,fstSec:0,sndSec:0,thrSec:0},comboText:new ig.Font('media/combo.font.png'),comboRText:new ig.Font('media/comboRed.font.png'),comboYText:new ig.Font('media/comboYellow.font.png'),stats:{penalty:0,points:0,money:0,waveNum:this.wave},penaltyLine:-2500,cRundPoints:0,gravity:300,countEnemy:0,gameMode:0,comboCount:1,comboReset:null,timerEff:null,playerTurn:true,lvlMap:null,newRound:false,gotoShop:false,loadedBallType:null,reloadBallrdy:false,syncTime:null,oscTimer:null,oscFx:0,wave:-1,spawnQuery:0,totalMonsters:0,graceEntry:0,standEntry:0,challEntry:0,roundNum:0,waveNum:0,eSpecies:"",rSpawnManagement:0,rGoalManagement:0,enemyArchive:0,numCom:0,componentArchive:0,componentArchive2:0,yScroll:0,sData:[],tData:0,plotter:{x:0,y:0,select:0},colData:[],atlasOrder:[],dirInc:0,hitWall:0,itrackBall:0,leftoff:0,tDelay:0,startstop:null,metamode:false,tempmode:false,lastPos:{x:0,y:0},lastEnNode:{x:null,y:null},component:null,aTick:0,gRate:0,touching:false,toX:0,toY:0,buttons:null,scrollT:null,scrollS:0,scrollLock:0,slideFx:0,dampening:0,ease:false,tvButton:new ig.Image('media/tvButtons.png'),sliderImg:new ig.Image('media/slider.png'),imgAddin:0,musicTrans0:new ig.Sound('music/trans0.ogg'),goAnnouncer:new ig.Sound('music/GOOO.ogg'),anvIns:new Image(120,120),scrollImg1:new Image(125,500),scrollImg2:new Image(250,1000),plotImg1:new Image(125,100),plotImg2:new Image(250,200),drawnAvi:false,bumperImg:new Image(45,45),fxPlay:false,fxTime:null,startStop:false,TOTAL_PARTICLES:30,killParticles:new ig.Timer(),pool:[],countHits:0,prefMode:false,optionMenu:false,stopMusic:false,reloaded:false,cmd:[],cPanel:[],index:0,isRunning:true,goNext:false,animSheet:new ig.AnimationSheet('media/widNar.png',60,68),animSheet2:new ig.AnimationSheet('media/popGuy.png',35,40),animEvent:null,animEvent2:null,orderCall:0,intro:true,bumpTfx:null,bossKill:false,init:function(){if(ig.ua.mobile===true)ig.game.prefMode=true;this.aviIns=new Image(120,120);(ig.system.scale==2)?(this.scrollImg1=new Image(125,500)):(this.scrollImg1=new Image(250,1000));(ig.system.scale==2)?(this.plotImg1=new Image(125,100)):(this.plotImg1=new Image(250,200));this.animEvent=new ig.Animation(this.animSheet,.2,[0,1]);this.animEvent.x=0;this.animEvent.y=0;this.animEvent.mvx=0;this.animEvent.mvy=0;this.animEvent.isMoving=false;this.animEvent2=new ig.Animation(this.animSheet2,.2,[0,1]);this.animEvent2.x=0;this.animEvent2.y=0;this.animEvent2.mvx=0;this.animEvent2.mvy=0;this.animEvent2.isMoving=false;this.cmd=[[["drawAnim",this.animSheet,60,200,.2,[0]],["callOut",120,150,"Hello there! My name  is Pr.Widdly. Welcome  to Monsters from the   Sky Beta",22],["callOut",120,100,"",15,true],["drawAnim",this.animSheet,60,200,.2,[1]],["callOut",120,150,"I hadnt had the time to make a in-game  tutorial, so I recommend reviewing it on the webpage if needed ",22],["callOut",120,100,"",15,true],["drawAnim",this.animSheet,60,200,.2,[2],this.animSheet2,160,260,.1,[0]],["callOut",150,270,"LIES HE'S A LAZY BUM.",20],["callOut",120,100,"",15,true],["drawAnim",this.animSheet,60,200,.2,[4]],["callOut",120,150,"...anyways",20],["callOut",120,100,"",15,true],["drawAnim",this.animSheet,60,200,.2,[2]],["callOut",120,150,"There is an options menu on the left corner if you wish to turn music off or if the gameplay is slow",22],["callOut",120,100,"",15,true],["drawAnim",this.animSheet,60,200,.2,[0]],["callOut",120,150,"Okay lets get to it then! I hope you enjoy it.",20],["callOut",120,100,"end",15,true],["end"],["none"],["moveTo",120,-1900,50],["callOut",50,150," BWAH HA HA HA YOU'LL NEVER PENITRATE MY FORCE FEILD.",27],["drawAnim",this.animSheet,60,200,.2,[2]],["callOut",120,150,"This guy is a Boss it looks like he has a protective barrier we'll have to try somthing else.",20],["callOut",120,150,"Seems like the jewerly hes wearing is responsible for his sheild generator we should try hitting those ",20],["callOut",120,100,"end",15,true],["drawAnim",this.animSheet,60,200,.2,[2],this.animSheet2,160,260,.1,[0]],["callOut",150,270,"YEAH HIT HIM IN THE JEWELS!.",20],["callOut",120,100,"",15,true],["drawAnim",this.animSheet,60,200,.2,[3]],["callOut",120,150,"...",20],["callOut",120,100,"",15,true],["end"],["moveTo",120,-1900,50],["callOut",50,150,"MY PRESIOUS JEWELS!!",27],["killBoss"],["end"],["none"],]]
this.aviIns.src='media/avimg2.png';(ig.system.scale==2)?(this.scrollImg1.src='media/scroll.png'):(this.scrollImg1.src='media/scroll2.png');(ig.system.scale==2)?(this.plotImg1.src='media/plot.png'):(this.plotImg1.src='media/plot2.png');this.bumperImg.src='media/bumper.png';this.loadLevel(LevelTestlvl);this.lvlMap=ig.game.backgroundMaps[0];this.gameMode=storage.getInt('gameMode');this.aTick=.04
this.gRate=this.gravity*ig.game.aTick
this.gameDimesion.tilesize=ig.game.backgroundMaps[0].tilesize
this.gameDimesion.xLevel=ig.system.width;this.gameDimesion.yLevel=ig.system.height;this.gameDimesion.fstSec=(this.gameDimesion.xLevel/3)/2
this.gameDimesion.sndSec=(this.gameDimesion.xLevel/2)
this.gameDimesion.thrSec=(this.gameDimesion.xLevel)-this.gameDimesion.fstSec
this.gameDimesion.ground=1250;this.scrollT=new ig.Timer();this.startstop=new ig.Timer();this.fxTime=new ig.Timer();ig.game.startstop.pause();this.sData.length=200;for(i=0;i<this.sData.length;i++){var sPos=new Object();var upper=ig.game;sPos.posX=0
sPos.posY=0
sPos.velX=0
sPos.velY=0
sPos.invsX=false
sPos.invsY=false
sPos.invsVel=false
sPos.xBouy=0
sPos.yBouy=0
sPos.comColl=false
sPos.indexOf=i;sPos.Fn={invsX:function(i){if(i>0){if(upper.sData[i].invsX===false&&upper.sData[i].comColl===false){upper.sData[i].velY=upper.sData[i-1].velY-12;upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*.04);upper.sData[i].velX=(upper.sData[i-1].velX)*-upper.loadedBallType.bounciness;}
if(upper.sData[i].invsX===true){upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick);upper.sData[i].velX=(upper.sData[i-1].velX)*-(upper.loadedBallType.bounciness);upper.sData[i].velY=upper.sData[i-1].velY-ig.game.gRate;upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-ig.game.aTick);}
if(upper.sData[i].comColl===true){upper.sData[i].velX=(upper.sData[i-1].velX)*-upper.loadedBallType.bounciness
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick)}}},invsY:function(i){if(i>0){if(upper.sData[i].invsY===false&&upper.sData[i].comColl===false){upper.sData[i].posX=upper.sData[i-1].posX
upper.sData[i].velX=upper.sData[i-1].velX
upper.sData[i].velY=(upper.sData[i-1].velY)*-upper.loadedBallType.bounciness}
if(upper.sData[i].invsY===true){upper.sData[i].velY=(upper.sData[i-1].velY*-(upper.loadedBallType.bounciness))-ig.game.gRate
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick)
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i-1].velX*-ig.game.aTick)}
if(upper.sData[i].comColl===true){upper.sData[i].velY=(upper.sData[i-1].velY-ig.game.gRate)*-upper.loadedBallType.bounciness
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-ig.game.aTick)
upper.sData[i].posY=upper.sData[i-1].posY}}},invsVel:function(i,xBouy,yBouy){upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*.04)
upper.sData[i].velX=(upper.sData[i-1].velX)*-(xBouy)
upper.sData[i].velY=(upper.sData[i-1].velY*-(yBouy))-12
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-.04)
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*.04)},trace:function(i){upper.sData[i].velX=upper.sData[i-1].velX
upper.sData[i].velY=upper.sData[i-1].velY-ig.game.gRate
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-ig.game.aTick)
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick)}}
this.sData[i]=sPos}
this.colData.length=20;for(i=0;i<this.colData.length;i++){var sPos=new Object();sPos.posX=0
sPos.posY=0
sPos.invsX=false
sPos.invsY=false
sPos.invVel=false
sPos.xBouy=0
sPos.yBouy=0
sPos.orderOf=null
this.colData[i]=sPos}
this.rSpawnManagement=[[["EntityMonster0",59,3,1]],["BOSS"],["end"]]
this.comboReset=new ig.Timer();this.syncTime=new ig.Timer();this.tDelay=new ig.Timer();this.yScroll=0;this.stats.points=storage.getInt('points');this.roundNum=0;this.enemyArchive=new Array(200)
this.componentArchive=new Array(16)
this.componentArchive2=new Array(8)
this.rGoalManagement=[5000,5250,5500,6000]
ig.input.bind(ig.KEY.MOUSE1,'click');this.scrollT.pause();this.bumpTfx=new ig.Timer();this.bumpTfx.pause();},update:function(){this.parent();storage.set('gameMode',0)
if(this.intro==true)ig.game.gameMode=4;ig.game.newRound=true
if(this.gameMode==0&&this.totalMonsters==0){for(i=0;i<this.rSpawnManagement[this.roundNum].length;i++){this.totalMonsters+=(this.rSpawnManagement[this.roundNum][i][1]);}}
if(this.gameMode==1)
{this.totalMonsters=0;}
if(this.comboReset.delta()>0){this.comboCount=1;this.comboReset.reset();this.comboReset.pause();}
if(this.gameMode==1&&this.countEnemy<1&&this.wave<2){this.wave++;this.RoundUpdas();storage.set('points',this.stats.points);}
if(this.wave===2&&this.countEnemy<1){ig.game.gameMode=0;storage.set('points',this.stats.points);storage.set('gameMode',0)
storage.set('round',this.roundNum+=1)
this.wave=0;this.RoundUpdas();ig.game.spawnEntity("EntityBall",ig.game.getEntitiesByType(EntitySling)[0].pos.x,1000);ig.game.loadedBallType.kill();ig.game.plotter.select=0;}
var inTime,vRate,hRate,maxV,curPos,curVel,solPos,base,invCase,reflector,collides,wall,size,ghost,segDis,ax,ay,bx,by;curVel={x:0,y:0};curPos={x:0,y:0};solPos={x:0,y:0};maxV={x:0,y:0};base=0;if(ig.game.startstop.delta().round(2)>0.04)
{ig.game.loadedBallType.freeze=true;ig.game.startstop.reset();ig.game.startstop.pause();}
maxV.y=ig.game.getEntitiesByType(EntitySling)[0].maxVelocity
maxV.x=ig.game.getEntitiesByType(EntitySling)[0].maxVelocityX
solPos.x=ig.game.getEntitiesByType(EntitySling)[0].prePositionX
solPos.y=ig.game.getEntitiesByType(EntitySling)[0].prePositionY
curPos.x=ig.game.loadedBallType.pos.x
curPos.y=ig.game.loadedBallType.pos.y
curVel.x=ig.game.loadedBallType.vel.x
curVel.y=ig.game.loadedBallType.vel.y
hRate=5*(ig.game.loadedBallType.phyTime);vRate=(300*ig.game.loadedBallType.phyTime);if(ig.game.loadedBallType.vel.y===0){this.sData[0].velY=maxV.y;this.sData[0].velX=maxV.x;this.sData[0].posY=solPos.y
this.sData[0].posX=solPos.x-ig.game.loadedBallType.parOffset.x;this.sData[1].velX=this.sData[0].velX
this.sData[1].velY=maxV.y-(ig.game.gravity*ig.game.aTick);this.sData[1].posX=this.sData[0].posX+(this.sData[0].velX*ig.game.aTick)
this.sData[1].posY=this.sData[0].posY+(-this.sData[1].velY*ig.game.aTick)}else
{this.sData[0].velX=curVel.x;this.sData[0].velY=-curVel.y;this.sData[0].posX=curPos.x;this.sData[0].posY=curPos.y;this.sData[1].velX=curVel.x;this.sData[1].velY=-curVel.y;this.sData[1].posX=curPos.x;this.sData[1].posY=curPos.y;}
var ax,ay,bx,by,cx,cy,segDis,segDis2
if(this.plotter.select!=0){this.plotter.x=this.sData[this.plotter.select].posX
this.plotter.y=this.sData[this.plotter.select].posY}else
{this.plotter.x=this.sData[this.itrackBall].posX
this.plotter.y=this.sData[this.itrackBall].posY}
var testC;testC=this.getEntitiesByType(EntityPlatform)[0];testC2=this.getEntitiesByType(EntityPlatform)[1];for(i=2,length=this.sData.length;i<length;i++)
{offset=ig.game.loadedBallType.size.x
this.sData[i].Fn.trace(i)
this.BorderChecks(0,ig.game.gameDimesion.xLevel,null,null,i,3)
this.BorderChecks(null,null,this.gameDimesion.ground,null,i,4)
for(j=0,temp=0,len=ig.game.dirInc+1;j<len;j++)
{if(this.colData[j].orderOf!==null&&ig.game.loadedBallType.freeze===true){temp=this.colData[j].orderOf;this.colData[j].posX=this.sData[temp].posX;this.colData[j].posY=this.sData[temp].posY;if(this.colData[j].invsVel==true){this.colData[j].xBouy=this.sData[temp].xBouy;this.colData[j].yBouy=this.sData[temp].yBouy;}}
this.sData[i].invsY=(1+(this.sData[i-1].posX+this.sData[i-1].posY).round(4)===(this.colData[j].posX+this.colData[j].posY).round(4)+this.colData[j].invsY)
if(this.sData[i].invsY)break;this.sData[i].invsX=(1+(this.sData[i-1].posX+this.sData[i-1].posY).round(4)===(this.colData[j].posX+this.colData[j].posY).round(4)+this.colData[j].invsX)
if(this.sData[i].invsX)break;this.sData[i].invsVel=(1+(this.sData[i-1].posX+this.sData[i-1].posY).round(4)===(this.colData[j].posX+this.colData[j].posY).round(4)+this.colData[j].invsVel);if(this.sData[i].invsVel===true){this.sData[i].Fn.invsVel(i,this.colData[j].xBouy,this.colData[j].yBouy)
break;}
if(this.sData[i].invsVel)break;}
if(this.sData[i].invsX===true)this.sData[i].Fn.invsX(i);if(this.sData[i].invsY===true)this.sData[i].Fn.invsY(i);this.itrackBall=1;if(ig.game.loadedBallType.hold===true)this.sData[i].invsX=false;if(ig.game.loadedBallType.hold===true)this.sData[i].invsY=false;if(ig.game.loadedBallType.hold===true)this.sData[i].comColl=false;}
if(this.getEntitiesByType('EntityPlatform')==0){}
if(ig.game.stopMusic==false){if(ig.game.loadedBallType.vel.y==0){if(window.playing==false){window.playThis=1;;window.playing=true;audio.play(window.playThis);}
if(window.playThis==4){audio.stop(window.playThis);window.playThis=1;audio.play(window.playThis);}
if(window.playThis==2){audio.stop(window.playThis);window.playThis=1;audio.play(window.playThis);}else{window.playThis=1;}}else{if(ig.game.comboCount<=1){audio.stop(window.playThis);window.playThis=2;audio.play(window.playThis);}else{audio.stop(window.playThis);window.playThis=4;audio.play(window.playThis);}}
if(ig.game.metamode==true){audio.stop(window.playThis);this.musicTrans0.loop=false;if(this.fxPlay==false){this.fxTime.unpause();this.musicTrans0.play();this.fxPlay=true;}
if(this.fxTime.delta()>2.5){window.playThis=3;audio.play(window.playThis);this.fxTime.pause();}}else{this.fxPlay=false;this.fxTime.set(0);this.fxTime.pause();}}},draw:function(){this.parent();var clockwise=true;var angle=(90).toRad();var bumpfx;var size=15;var sin=clockwise?Math.sin(angle):Math.sin(-angle),cos=clockwise?Math.cos(angle):Math.cos(-angle);ig.system.context.beginPath()
ig.system.context.save();ig.system.context.fillStyle="white";if(ig.game.loadedBallType.hitSide.left==true||ig.game.loadedBallType.hitSide.right==true){this.bumpTfx.unpause();}
if(this.bumpTfx.delta()!==0){if(this.bumpTfx.delta()<.6){bumpfx=(Math.sin((20)*this.bumpTfx.delta())).toDeg()
if(ig.game.loadedBallType.hitSide.left==true){ig.system.context.fillRect(0*(ig.system.scale/2),0*(ig.system.scale/2),(size-bumpfx)*(ig.system.scale/2),640*(ig.system.scale/2));}
if(ig.game.loadedBallType.hitSide.right==true){ig.system.context.fillRect(480*(ig.system.scale/2)-(size-bumpfx),0*(ig.system.scale/2),(size-bumpfx)*(ig.system.scale/2),640*(ig.system.scale/2));}
if(ig.game.loadedBallType.hitSide.up==true){ig.system.context.fillRect(0*(ig.system.scale/2),0*(ig.system.scale/2),640*(ig.system.scale/2),(size-bumpfx)*(ig.system.scale/2));}}else{this.bumpTfx.reset();this.bumpTfx.pause();ig.game.loadedBallType.hitSide.left=false;ig.game.loadedBallType.hitSide.right=false;ig.game.loadedBallType.hitSide.up=false;}}
ig.system.context.restore();if(this.buttons){this.buttons.draw();}
if(ig.game.optionMenu==true){ig.system.context.fillStyle="#c04809";ig.system.context.fillRect(0*(ig.system.scale/2),0*(ig.system.scale/2),640*(ig.system.scale/2),200*(ig.system.scale/2));}
if(ig.gui.show)ig.gui.draw();var pop=(Math.abs(-1+Math.abs(-1+(2+(ig.game.comboReset.delta()*2))))+1);ig.game.comboYText.scaleFont=(pop)+(.7);if(ig.game.comboCount>1){ig.game.comboYText.draw(''+(ig.game.comboCount),ig.game.gameDimesion.sndSec,30,ig.Font.ALIGN.CENTER);}
var cam=ig.game.getEntitiesByType(EntityCamera)[0];var xF=0;var increment=((500/5)/500)
if(ig.game.metamode==true){ig.system.context.beginPath();var img2;(ig.system.scale==2)?(img2=new Image(125,500)):(img2=new Image(250,1000));var img3,addIn;(ig.system.scale==2)?(img3=new Image(125,100)):(img3=new Image(250,200));var increment=(500/(500/5));var ease=false;var step=(((img2.height)/(5)))/(ig.system.scale/2);this.scrollLock=((ig.game.sData[ig.game.plotter.select].indexOf*step))
if(cam.srcSpeed!=0&&cam.srcSpeed!=-1&&cam.srcSpeed!=1){this.slideFx=2.5*cam.srcSpeed;this.ease=false;}
if(cam.srcSpeed.round()===1||cam.srcSpeed.round()===-1){this.slideFx=(10*cam.srcSpeed);this.ease=true;}
this.scrollS=(((this.slideFx))+(this.scrollLock));if(cam.srcSpeed===0&&this.ease===false){if(this.scrollS>this.scrollLock)
{this.scrollT.unpause();this.slideFx-=Math.abs(this.scrollT.delta()-step/4);if(this.slideFx<0){this.slideFx=0;this.scrollT.reset();this.scrollT.pause();}}
if(this.scrollS<this.scrollLock)
{this.scrollT.unpause();this.slideFx+=Math.abs(this.scrollT.delta()-step/4);if(this.slideFx>0){this.slideFx=0;this.scrollT.reset();this.scrollT.pause();}}}
if(cam.srcSpeed===0&&this.ease===true){if(this.scrollS>this.scrollLock)
{this.scrollT.unpause();this.slideFx+=(this.scrollT.delta())*(step)/4;if(this.scrollS>this.scrollLock+step)
{this.slideFx=0;this.scrollS=this.scrollLock+(step*2);this.scrollT.reset();this.scrollT.pause();}}
if(this.scrollS<this.scrollLock)
{this.scrollT.unpause();this.slideFx-=(this.scrollT.delta())*(step)/4;if(this.scrollS<this.scrollLock-step)
{this.slideFx=0;this.scrollS=this.scrollLock-(step*2);this.scrollT.reset();this.scrollT.pause();}}}
var imgPlotters=[this.colData.length];for(i=0;i<this.colData.length;i++)
{var imgPos=new Object();imgPos.img=this.plotImg1;imgPos.posX=0
imgPos.indexOf=i;imgPos.posY=imgPos.img.y-((this.scrollS-(this.colData[i].orderOf*(100))-270));imgPlotters[i]=imgPos}
atlias=ig.gui.element.action('getByName','insV');clipSt={x:100,y:0};pos={x:200,y:50}
scale={x:(img2.width)*ig.system.scale/2,y:(img2.height/5)*ig.system.scale/2}
var img2=this.scrollImg1;if(ig.game.sData[ig.game.plotter.select+1].invsVel===false||ig.input.state('click')===false||!atlias.within){ig.system.context.fillStyle=ig.system.context.createPattern(img2,"repeat");ig.system.context.save();ig.system.context.translate(img2.x+(370*(ig.system.scale/2)),((img2.y)-(this.scrollS*(ig.system.scale/2)))+70*(ig.system.scale/2));ig.system.context.fillRect(0,0+this.scrollS*(ig.system.scale/2),(img2.width),(img2.height));ig.system.context.restore();ig.system.context.fillStyle="rgba(0, 0, 0, 0.3)";ig.system.context.save();ig.system.context.translate(0,0);ig.system.context.fillRect(img2.x+(375*(ig.system.scale/2)),70*(ig.system.scale/2),(img2.width),(img2.height/3)+30);ig.system.context.fillRect(img2.x+(375*(ig.system.scale/2)),70*(ig.system.scale/2),(img2.width),(img2.height/5));ig.system.context.fillRect(img2.x+(375*(ig.system.scale/2)),375*(ig.system.scale/2),(img2.width),(img2.height/3)+30);ig.system.context.fillRect(img2.x+(375*(ig.system.scale/2)),475*(ig.system.scale/2),(img2.width),(img2.height/5));ig.system.context.restore();for(i=0;i<ig.game.colData.length;i++){if(imgPlotters[i].posY*(ig.system.scale/2)>0&&imgPlotters[i].posY*(ig.system.scale/2)<570*(ig.system.scale/2)){ig.system.context.drawImage(imgPlotters[i].img,imgPlotters[i].img.x+(370*(ig.system.scale/2)),imgPlotters[i].posY*(ig.system.scale/2));}}
ig.system.context.fillStyle="red";ig.system.context.font=(ig.system.scale/2)*40+"px Arial";ig.system.context.textAlign="center";ig.system.context.fillText(this.plotter.select,img2.x+(430*(ig.system.scale/2)),335*(ig.system.scale/2));}
var mouse={x:((ig.game._rscreen.x/ig.system.scale)+ig.input.mouse.x),y:(ig.input.mouse.y)}
var Var={x:(ig.game.plotter.x+(ig.game._rscreen.x/ig.system.scale)),y:(ig.game.plotter.y-(ig.game._rscreen.y))}
var Var2={x:atlias.pos.x+(ig.game._rscreen.x/ig.system.scale),y:(atlias.pos.y+ig.game._rscreen.y)}
var angle=0.001;Vang2={x:ig.game._rscreen.y+atlias.pos.y,y:ig.game._rscreen.y+atlias.pos.y};Vang3={x:((ig.game._rscreen.x*(2/ig.system.scale))+ig.input.mouse.x),y:(ig.input.mouse.y)}
if(Var2.x==ig.game.plotter.x&&mouse.x==ig.game.plotter.x&&mouse.y<ig.game.plotter.y){angle=0}
if(Var2.x==ig.game.plotter.x&&mouse.x==ig.game.plotter.x&&mouse.y>ig.game.plotter.y){angle=180}
if(Var2.x<ig.game.plotter.x&&mouse.x<ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Vang3.x-Var.x),(Vang3.y-Var.y)))-(0).toRad())).toDeg());;}
if(Var2.x>ig.game.plotter.x&&mouse.x>ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Vang3.x-Var.x),(Vang3.y-Var.y)))-(0).toRad())).toDeg());}
if(Var2.x>ig.game.plotter.x&&mouse.x<ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Vang3.x-Var.x),(Vang3.y-Var.y)))-(180).toRad())).toDeg());}
if(Var2.x<ig.game.plotter.x&&mouse.x>ig.game.plotter.x){angle=(Math.abs(((Math.atan2((Var.x-Vang3.x),(Var.y-Vang3.y)))-(180).toRad())).toDeg());}
var bx,by;var dist;var off=40;(ig.system.scale==2)?(bx=(((ig.game.plotter.x-(ig.game.screen.x/ig.system.scale))+(140))),by=((180)+ig.game.plotter.y-ig.game.screen.y)*(ig.system.scale/2)):(bx=(((ig.game.plotter.x-(ig.game.screen.x/ig.system.scale))+(380))),by=((170)+ig.game.plotter.y-ig.game.screen.y)*(ig.system.scale/2))
dist=Math.sqrt(Math.pow(ig.game.plotter.x-(atlias.pos.x+(ig.game.screen.x/ig.system.scale)),2)+Math.pow(ig.game.plotter.y-(atlias.pos.y+ig.game.screen.y),2))
var scale=(dist/(30)).limit((.5),(1));if(atlias.pos.x<ig.game.gameDimesion.xLevel/2)angle*=-1;if(atlias.pos.x>ig.game.gameDimesion.xLevel/2)Math.abs(angle);if(ig.game.sData[ig.game.plotter.select+1].invsVel===true&&ig.input.state('click')==true&&atlias.within){ig.system.context.save();ig.system.context.translate((240*(ig.system.scale/2))-off,(320*(ig.system.scale/2))-off);ig.system.context.translate(60-15,60-15);ig.system.context.rotate((angle).toRad());ig.system.context.scale(scale*(ig.system.scale),scale*(ig.system.scale));ig.system.context.drawImage(this.aviIns,-111,-111);this.drawnAvi=true;ig.system.context.restore();ig.system.context.beginPath();ig.system.context.moveTo(bx-15,by-15);(ig.system.scale==2)?(ig.system.context.lineWidth=5,ig.system.context.lineTo((bx-15)+(170*scale)*Math.sin(angle.toRad()),(by-15)+(170*scale)*Math.cos(angle.toRad()))):(ig.system.context.lineWidth=15,ig.system.context.lineTo((bx-15)+(330*scale)*Math.sin(angle.toRad()),(by-15)+(330*scale)*Math.cos(angle.toRad())))
ig.system.context.stroke()
ig.system.context.fillStyle="red";ig.system.context.font=(ig.system.scale/2)*20+"px Arial";ig.system.context.textAlign="center";ig.system.context.fillText(angle.round(),240*(ig.system.scale/2)+5,320*(ig.system.scale/2)+10);}
for(i=1;i<ig.game.sData.length-1;i+=2){if(typeof ig.game.sData[i-1]!='undefined'){ig.system.context.beginPath();ig.system.context.moveTo((((ig.game.sData[i-1].posX*ig.system.scale)-ig.game._rscreen.x))+ig.game.loadedBallType.size.x/2,(((ig.game.sData[i-1].posY)-ig.game._rscreen.y)*ig.system.scale)+ig.game.loadedBallType.size.x/2)
ig.system.context.lineTo((((ig.game.sData[i].posX*ig.system.scale)-ig.game._rscreen.x))+ig.game.loadedBallType.size.x/2,(((ig.game.sData[i].posY)-ig.game._rscreen.y)*ig.system.scale)+ig.game.loadedBallType.size.x/2)
if(ig.game.sData[i].collH===true||ig.game.sData[i].collV===true||ig.game.sData[i].invsX===true||ig.game.sData[i].invsY===true||ig.game.sData[i].invsVel===true)
{ig.system.context.strokeStyle='#ff2222';}
else{ig.system.context.strokeStyle='#ffffff';}
if(ig.game.plotter.x==ig.game.sData[i].posX&&ig.game.plotter.y===ig.game.sData[i].posY)
{ig.system.context.strokeStyle='#ff7600';}
ig.system.context.stroke();}}}
if(ig.game.gameMode==4){var xLevel=ig.system.width*ig.system.scale;var yLevel=ig.system.height*ig.system.scale;var camCom=ig.game.getEntitiesByType(EntityCamera)[0]
if(ig.input.pressed('click')&&this.isRunning==false&&this.goNext==false){this.index++;this.isRunning=true;this.animEvent.rewind();this.animEvent2.rewind();}
if(this.cmd[0][this.index][0]==="killBoss"){ig.game.getEntitiesByType(EntityBoss1)[0].death=true;}
if(this.cmd[0][this.index][0]==="moveTo"&&this.isRunning==true){this.moveTo(this.cmd[0][this.index][1],this.cmd[0][this.index][2],this.cmd[0][this.index][3]);console.log("here")}
if(this.cmd[0][this.index][0]==="moveTo"&&this.isRunning==false&&this.cmd[0][this.index][4]===true){this.goNext=true;}
if(this.goNext==true){this.index++;this.isRunning=true;this.goNext=false;}
if(this.cmd[0][this.index][0]==="drawAnim"){this.isRunning=true;this.animEvent.sheet=this.cmd[0][this.index][1];this.animEvent.frameTime=this.cmd[0][this.index][4];this.animEvent.sequence=this.cmd[0][this.index][5];this.animEvent.x=(this.cmd[0][this.index][2]);this.animEvent.y=(this.cmd[0][this.index][3]);if(this.orderCall<this.index){this.orderCall=this.index;}
if(ig.input.pressed('click')&&typeof this.cmd[0][this.orderCall+1]!=='undefined'&&this.cmd[0][this.orderCall+1][0]==="callOut"){if(this.orderCall==0){this.orderCall=this.index+1;}else
{this.orderCall++;}}
if(this.orderCall!=0){this.drawCallout(this.cmd[0][this.orderCall][1],this.cmd[0][this.orderCall][2],this.cmd[0][this.orderCall][3],this.cmd[0][this.orderCall][4]);}
if(this.cmd[0][this.orderCall][5]==true){this.isRunning=true;this.index=this.orderCall+1;this.orderCall=this.index+1;}
ig.game.moveAnim(this.animEvent,60,150,2);if(this.animEvent.isMoving==false)
this.animEvent.draw(this.animEvent.x,this.animEvent.y);if(typeof this.cmd[0][this.index][6]!=='undefined'){this.animEvent2.x=(this.cmd[0][this.index][7]);this.animEvent2.y=(this.cmd[0][this.index][8]);this.animEvent2.sheet=this.cmd[0][this.index][6];this.animEvent2.sequence=this.cmd[0][this.index][10];this.animEvent2.frameTime=this.cmd[0][this.index][9];if(this.animEvent2.isMoving==false)
this.animEvent2.draw(this.animEvent2.x,this.animEvent2.y);}else{}}
if(this.cmd[0][this.index][0]==="callOut"){this.orderCall=this.index;this.isRunning=false;}
if(this.cmd[0][this.index][0]==="end"){ig.game.gameMode=0;ig.game.isRunning=false
this.intro=false;this.index++;}
if(this.cmd[0][this.index][0]==="shake"){if(this.shake===false){this.shakeCam(this.cmd[0][this.index][1],this.cmd[0][this.index][2],this.cmd[0][this.index][3],this.cmd[0][this.index][4]);this.goNext=true;}}
if(this.shake===true){this.shakeTime.unpause();var speed=this.shakeTime.delta()*this.shSpeed;camCom.vel.x=(Math.sin(speed)).toDeg()*this.sMag.x;camCom.vel.y=(Math.sin(speed)).toDeg()*this.sMag.y;if(this.shakeTime.delta()>this.sTime){this.shakeTime.reset();this.shakeTime.pause();this.shake=false;camCom.vel.x=0;camCom.vel.y=0;}}
if(this.cmd[0][this.index][0]==="callOut"){this.drawCallout(this.cmd[0][this.orderCall][1],this.cmd[0][this.orderCall][2],this.cmd[0][this.orderCall][3],this.cmd[0][this.orderCall][4]);}
this.animEvent.scale.x=3;this.animEvent.scale.y=3;this.animEvent.update();this.animEvent2.scale.x=3;this.animEvent2.scale.y=3;this.animEvent2.update();ig.system.context.restore();}},Randomize:function(max){var rand=Math.floor(Math.random()*(max*2))-max
return rand;},RoundUpdas:function(){if(this.rSpawnManagement[this.roundNum][0]!="end"&&this.rSpawnManagement[this.roundNum][0]!="BOSS"){for(i=0;i<this.rSpawnManagement[this.roundNum].length;i++){this.graceEntry=(this.rSpawnManagement[this.roundNum][i][1]/3).floor()-this.rSpawnManagement[this.roundNum][i][2]
this.standEntry=((this.rSpawnManagement[this.roundNum][i][1]-this.graceEntry)/2).floor()-this.rSpawnManagement[this.roundNum][i][2]+this.rSpawnManagement[this.roundNum][i][3]
this.challEntry=this.rSpawnManagement[this.roundNum][i][1]-(this.graceEntry+this.standEntry)
this.spawnQuery=[this.graceEntry,this.standEntry,this.challEntry]
for(j=0;j!=this.spawnQuery[this.wave];j++){ig.game.spawnEntity(this.rSpawnManagement[this.roundNum][i][0],0,-7000)}}}else if(this.rSpawnManagement[this.roundNum][0]=="end"){ig.system.setGame(EndGame);}
if(this.rSpawnManagement[this.roundNum][0]=="BOSS"){console.log(this.roundNum);ig.game.spawnEntity('EntityBoss1',240,-2000);this.countEnemy=1;this.wave=2;this.gameMode=4;}},BorderChecks:function(bxOne,bxTwo,byOne,byTwo,i,operator){offset=ig.game.loadedBallType.size.x
offsetY=ig.game.loadedBallType.size.y
adx=this.sData[i-2].posX;bdx=this.sData[i-1].posX;cdx=this.sData[i].posX;segDisd=Math.abs(adx-bdx);segDis2d=Math.abs(cdx-bdx);ady=this.sData[i-2].posY;bdy=this.sData[i-1].posY;cdy=this.sData[i].posY;segDisdy=(-ady+bdy).round(0);segDis2dy=(-bdy+cdy).round(0);switch(operator){case 3:{if(this.sData[i].posX<=bxOne&&segDisd<=segDis2d){this.sData[i].posX=bxOne;this.sData[i].Fn.invsX(i);}
if(this.sData[i].posX+offset>=bxTwo&&segDisd<=segDis2d){this.sData[i].posX=(bxTwo-offset);this.sData[i].Fn.invsX(i);}}break;case 4:{if(this.sData[i].posY>byOne&&this.sData[i-1].posY>byOne&&segDisdy.round(0)<=segDis2dy.round(0)){this.sData[i].Fn.invsY(i)
this.sData[i-1].posY=byOne;this.sData[i].posY=byOne;}}break;case 15:{if(this.sData[i].posX>bxOne&&(this.sData[i].posX+offset)<bxTwo){if(this.sData[i-1].posY>byTwo&&this.sData[i].posY<byTwo&&this.sData[i-1].posY-offsetY>byOne&&this.sData[i].posY-offsetY>byOne&&segDisdy<=segDis2dy){this.sData[i].comColl=true
this.sData[i].Fn.invsY(i);this.sData[i].posY=byTwo;}else{this.sData[i].comColl=false}
if(this.sData[i-1].posY<byOne&&this.sData[i].posY+offsetY>byOne&&this.sData[i-1].posY<byTwo&&this.sData[i].posY<byTwo&&segDisdy<=segDis2dy||this.sData[i].posY==byOne&&this.sData[i-1].posY==byOne&&this.sData[i-2].posY==byOne){this.sData[i].comColl=true
this.sData[i].Fn.invsY(i);this.sData[i].posY=byOne-(offsetY)}else{this.sData[i].comColl=false}}else{this.sData[i].comColl=false}
if(this.sData[i].posY+offsetY<=byTwo&&this.sData[i].posY>=byOne){if(this.sData[i-1].posX+offset<bxOne&&this.sData[i].posX+offset>bxOne&&segDisd<=segDis2d){this.sData[i].Fn.invsX(i);this.sData[i].posX=bxOne;}
if(this.sData[i-1].posX>bxTwo&&this.sData[i].posX<=bxTwo&&segDisd.round(0)<=segDis2d.round(0)){this.sData[i].Fn.invsX(i);this.sData[i].posX=bxTwo;}
if(!(this.sData[i-1].posX+offset<bxOne)&&!(this.sData[i].posX+offset>bxOne)&&!(segDisd<=segDis2d)||!(this.sData[i-1].posX>bxTwo)&&!(this.sData[i].posX<=bxTwo)&&!(segDisd.round(0)<=segDis2d.round(0)))
{this.sData[i].comColl=false}}
if(this.sData[i].posY+offsetY<byTwo&&this.sData[i].posY>byOne&&this.sData[i].posX+offset>bxOne&&this.sData[i].posX<bxTwo){var xCenter,yCenter
xCenter=(((bxTwo-bxOne)/2)+bxOne);yCenter=((byTwo-byOne)/2)+-byTwo;(this.sData[i].posX+(offset/2)>xCenter)?(xDist=Math.abs((this.sData[i].posX+(offset/2))-bxTwo)):(xDist=Math.abs((this.sData[i].posX+(offset/2))-bxOne));(this.sData[i].posY+(offsetY/2)<yCenter)?(yDist=Math.abs((this.sData[i].posY+(offsetY/2))-byTwo)):(yDist=Math.abs(byOne-(this.sData[i].posY+(offsetY/2))));if(xDist<yDist){(xCenter>this.sData[i].posX+(offset/2))?(this.sData[i].posX=bxOne-offset,this.sData[i].Fn.invsX(i),this.sData[i].comColl=true):(this.sData[i].posX=bxTwo,this.sData[i].Fn.invsX(i),this.sData[i].comColl=true);}
if(xDist>yDist){{if(yCenter>this.sData[i].posY+(offsetY/2)){this.sData[i].posY=byOne-(offsetY);this.sData[i].Fn.invsY(i);this.sData[i].comColl=true;}
if(yCenter<this.sData[i].posY){this.sData[i].posY=byTwo;this.sData[i].Fn.invsY(i);this.sData[i].comColl=true;}}}}}break;default:return;}},getEntityByID:function(id){for(var i=0;i<ig.game.entities.length;i++){if(ig.game.entities[i].id==id){return ig.game.entities[i];}}},isIntersecting:function(aX,aY,bX,bY,cX,cY,dX,dY){var denominator,numerator1,numerator2,r,s;denominator=((bX-aX)*(dY-cY))-((bY-aY)*(dX-cX));numerator1=((aY-cY)*(dX-cX))-((aX-cX)*(dY-cY));numerator2=((aY-cY)*(bX-aX))-((aX-cX)*(bY-aY));if(denominator==0)return numerator1==0&&numerator2==0;r=numerator1/denominator;s=numerator2/denominator;return(r>=0&&r<=1)&&(s>=0&&s<=1);},rebuildColDat:function(sel,ind){var index=sel;var k=ind
this.colData[k].orderOf=index
ig.game.colData.sort(function(a,b){return(b.orderOf)-(a.orderOf);});},xOrSwap:function(a,b){return a^=b^(b=a);},cacheArrayClear:function(){this.colData=[];this.sData=[];this.plotter.select=0;ig.game.dirInc=0;this.colData.length=20;for(i=0;i<this.colData.length;i++)
{var sPos=new Object();sPos.posX=0
sPos.posY=0
sPos.invsX=false
sPos.invsY=false
sPos.invVel=false
sPos.xBouy=0
sPos.yBouy=0
sPos.orderOf=null
this.colData[i]=sPos}
this.sData.length=200;for(i=0;i<this.sData.length;i++)
{var sPos=new Object();var upper=ig.game;sPos.posX=0
sPos.posY=0
sPos.velX=0
sPos.velY=0
sPos.invsX=false
sPos.invsY=false
sPos.invsVel=false
sPos.xBouy=0
sPos.yBouy=0
sPos.comColl=false
sPos.indexOf=i;sPos.Fn={invsX:function(i){if(i>0){if(upper.sData[i].invsX===false&&upper.sData[i].comColl===false){upper.sData[i].velY=upper.sData[i-1].velY-12;upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*.04);upper.sData[i].velX=(upper.sData[i-1].velX)*-upper.loadedBallType.bounciness;}
if(upper.sData[i].invsX===true){upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick);upper.sData[i].velX=(upper.sData[i-1].velX)*-(upper.loadedBallType.bounciness);upper.sData[i].velY=upper.sData[i-1].velY-ig.game.gRate;upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-ig.game.aTick);}
if(upper.sData[i].comColl===true){upper.sData[i].velX=(upper.sData[i-1].velX)*-upper.loadedBallType.bounciness
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick)}}},invsY:function(i){if(i>0){if(upper.sData[i].invsY===false&&upper.sData[i].comColl===false){upper.sData[i].posX=upper.sData[i-1].posX
upper.sData[i].velX=upper.sData[i-1].velX
upper.sData[i].velY=(upper.sData[i-1].velY)*-upper.loadedBallType.bounciness}
if(upper.sData[i].invsY===true){upper.sData[i].velY=(upper.sData[i-1].velY*-(upper.loadedBallType.bounciness))-ig.game.gRate
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick)
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i-1].velX*-ig.game.aTick)}
if(upper.sData[i].comColl===true){upper.sData[i].velY=(upper.sData[i-1].velY-ig.game.gRate)*-upper.loadedBallType.bounciness
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-ig.game.aTick)
upper.sData[i].posY=upper.sData[i-1].posY}}},invsVel:function(i,xBouy,yBouy){upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*.04)
upper.sData[i].velX=(upper.sData[i-1].velX)*-(xBouy)
upper.sData[i].velY=(upper.sData[i-1].velY*-(yBouy))-12
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-.04)
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*.04)},trace:function(i){upper.sData[i].velX=upper.sData[i-1].velX
upper.sData[i].velY=upper.sData[i-1].velY-ig.game.gRate
upper.sData[i].posX=upper.sData[i-1].posX-(upper.sData[i].velX*-ig.game.aTick)
upper.sData[i].posY=upper.sData[i-1].posY-(upper.sData[i].velY*ig.game.aTick)}}
this.sData[i]=sPos}},drawCallout:function(posX=0,posY=0,txt="a",atXt=15){var tSize=25;ig.system.context.font=tSize+"px Arial";ig.system.context.textAlign="center";var widthTx=((txt.length+1)*tSize);var lmt=atXt;txt2=txt.slice(0,(lmt)-1);txt3=txt.slice(lmt,txt.length);var ln=(widthTx/(lmt*tSize)).round()+1
var rec={x:posX,y:posY};ig.system.context.fillStyle="white";var radius=20;var x=rec.x
var y=rec.y-(tSize)
var width=(lmt*tSize)-((tSize*4)+(lmt*6));var height=(tSize*2)+(ln*(tSize));ig.system.context.beginPath();ig.system.context.moveTo(x+radius,y);ig.system.context.lineTo(x+width-radius,y);ig.system.context.quadraticCurveTo(x+width,y,x+width,y+radius);ig.system.context.lineTo(x+width,y+height-radius);ig.system.context.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);ig.system.context.lineTo(x+radius,y+height);ig.system.context.quadraticCurveTo(x,y+height,x,y+height-radius);ig.system.context.lineTo(x,y+radius);ig.system.context.quadraticCurveTo(x,y,x+radius,y);ig.system.context.closePath();ig.system.context.fill();ig.system.context.stroke();ig.system.context.fillStyle="black";var speak=[[""],[""],[""],[""],[""],[""],[""],[""],[""],[""]];if(widthTx>lmt*tSize){for(i=0;i<=ln;i++){{if(i==0){speak[i][0]+=txt.slice(0,(lmt))}else{speak[i][0]+=txt.slice(lmt*(i),(lmt)*(i+1))}}
ig.system.context.fillText(speak[i],(rec.x+(lmt*tSize)/2)-((tSize*2)+(lmt*3)),(rec.y+tSize)+tSize*i);}}else{ig.system.context.fillText(txt,(rec.x+(lmt*tSize)/2)-((tSize*2)+(lmt*3)),(rec.y+tSize)+tSize);}},moveTo:function(x=0,y=0,rate=1){var camCom=ig.game.getEntitiesByType(EntityCamera)[0];if(camCom.viewPrev.x==0){camCom.viewPrev.x=camCom.view.x;}
if(camCom.viewPrev.y==0){camCom.viewPrev.y=camCom.view.y;}
var distance=Math.sqrt(Math.pow(x-camCom.viewPrev.x,2)+Math.pow(y-camCom.viewPrev.y,2));var directionX=(x-camCom.viewPrev.x)/distance;var directionY=(y-camCom.viewPrev.y)/distance;camCom.view.x+=directionX*rate;camCom.view.y+=directionY*rate;if(Math.sqrt(Math.pow(camCom.view.x-camCom.viewPrev.x,2)+Math.pow(camCom.view.y-camCom.viewPrev.y,2))>=distance)
{camCom.viewPrev.y=0;camCom.viewPrev.x=0;return this.isRunning=false;}},moveAnim:function(anim,x=0,y=0,rate=1){var prev={x:0,y:0};anim.isMoving=true
if(prev.x==0){prev.x=anim.x;}
if(prev.y==0){prev.y=anim.y;}
if(anim.mvx==0){anim.mvx=anim.x;}
if(anim.mvy==0){anim.mvy=anim.y;}
var distance=Math.sqrt(Math.pow(x-(anim.x),2)+Math.pow(y-(anim.y),2));var directionX=(x-(anim.x))/distance;var directionY=(y-(anim.y))/distance;if(Math.sqrt(Math.pow(anim.mvx-anim.x,2)+Math.pow(anim.mvy-anim.y,2))>=distance)
{anim.x=(anim.mvx*1.5);anim.y=(anim.mvy*1.5);return anim.isMoving=false;}else{anim.mvx+=directionX*rate;anim.mvy+=directionY*rate;ig.system.context.save();ig.system.context.translate(anim.mvx,anim.mvy);ig.game.animEvent.draw(anim.mvx,anim.mvy);ig.system.context.restore();}},});MainMenu=ig.Game.extend({menuText:new ig.Font('media/04b03.font.png'),background:new ig.Image('media/titleScreen.png'),newGame_b:{x:50,y:150,w:150,h:50},loadGame_b:{x:50,y:150,w:150,h:50},movieGame_b:{x:50,y:205,w:150,h:50},newGame:false,loadGame:false,movieGame:false,test:false,init:function(){ig.input.bind(ig.KEY.MOUSE1,'click');},update:function(){var scale=ig.system.scale/2;if(ig.input.pressed('click')&&this._inParameter(this.newGame_b.x,this.newGame_b.y,this.newGame_b.w,this.newGame_b.h)==true)
{storage.set('points',0)
storage.set('gameMode',0)
storage.set('round',0)
ig.system.setGame(MyGame)}
if(ig.input.pressed('click')&&this._inParameter(this.loadGame_b.x,this.loadGame_b.y,this.loadGame_b.w,this.loadGame_b.h,))
{ig.system.setGame(MyGame)}
if(ig.input.pressed('click')&&this._inParameter(this.movieGame_b.x,this.movieGame_b.y,this.movieGame_b.w,this.movieGame_b.h))
{ig.system.setGame(MoviePlays)}
this.parent();},draw:function(){this.parent();var scale=(ig.system.scale);this.background.draw(0,0);ig.system.context.beginPath();ig.system.context.rect(this.newGame_b.x*scale,this.newGame_b.y*scale,(this.newGame_b.w*scale),this.newGame_b.h*scale);ig.system.context.fillStyle="#c04809";ig.system.context.fill();ig.system.context.beginPath();ig.system.context.rect(this.movieGame_b.x*scale,this.movieGame_b.y*scale,(this.movieGame_b.w*scale),this.movieGame_b.h*scale);ig.system.context.fillStyle="#c04809";ig.system.context.fill();this.menuText.draw("Play Game",this.newGame_b.x+(this.newGame_b.w/2),this.newGame_b.y+(this.newGame_b.h/2),ig.Font.ALIGN.CENTER);this.menuText.draw("How to Play",this.movieGame_b.x+(this.movieGame_b.w/2),this.movieGame_b.y+(this.movieGame_b.h/2),ig.Font.ALIGN.CENTER);},_inParameter:function(b_posX,b_posY,wide,height){return(ig.input.mouse.x+ig.game.screen.x>b_posX&&ig.input.mouse.x+ig.game.screen.x<b_posX+(wide)&&ig.input.mouse.y+ig.game.screen.y>b_posY&&ig.input.mouse.y+ig.game.screen.y<b_posY+height)},});MoviePlays=ig.Game.extend({init:function(){this.loadLevel(LevelMovieTestlvl);ig.input.bind(ig.KEY.MOUSE1,'click');if(this.getEntitiesByType('EntityVideo')==0){ig.game.spawnEntity("EntityVideo",-125,0)}},});EndGame=ig.Game.extend({menuText:new ig.Font('media/04b03.font.png'),background:new ig.Image('media/titleScreen.png'),newGame_b:{x:50,y:230,w:150,h:50},score:{x:25,y:100,w:200,h:120},comboRText:new ig.Font('media/comboRed.font.png'),newGame:false,movieGame:false,test:false,init:function(){ig.input.bind(ig.KEY.MOUSE1,'click');},update:function(){var scale=ig.system.scale/2;if(ig.input.pressed('click')&&this._inParameter(this.newGame_b.x,this.newGame_b.y,this.newGame_b.w,this.newGame_b.h)==true)
{storage.set('points',0);storage.set('gameMode',0);storage.set('round',0);ig.system.setGame(MyGame)}
if(ig.input.pressed('click')&&this._inParameter(this.score.x,this.score.y,this.score.w,this.score.h)==true)
{var canvas=document.getElementById("canvas");var img=canvas.toDataURL("image/png").replace("image/png","image/octet-stream");ig.global.shareImg(img);}
this.parent();},draw:function(){this.parent();var scale=(ig.system.scale);this.background.draw(0,0);ig.system.context.beginPath();ig.system.context.rect(this.score.x*scale,this.score.y*scale,(this.score.w*scale),this.score.h*scale);ig.system.context.fillStyle="grey";ig.system.context.fill();ig.system.context.beginPath();ig.system.context.rect(this.newGame_b.x*scale,this.newGame_b.y*scale,(this.newGame_b.w*scale),this.newGame_b.h*scale);ig.system.context.fillStyle="#c04809";ig.system.context.fill();this.menuText.draw("Play Again?",this.newGame_b.x+(this.newGame_b.w/2),this.newGame_b.y+(this.newGame_b.h/2),ig.Font.ALIGN.CENTER);this.menuText.draw("Thanks for playing your Score was:",this.score.x+(this.score.w/2),this.score.y+((this.score.h/2)-50),ig.Font.ALIGN.CENTER);ig.game.comboRText.scaleFont=.5;this.comboRText.draw(storage.getInt('points'),this.score.x+(this.score.w/2),this.score.y+((this.score.h/2)),ig.Font.ALIGN.CENTER);},_inParameter:function(b_posX,b_posY,wide,height){return(ig.input.mouse.x+ig.game.screen.x>b_posX&&ig.input.mouse.x+ig.game.screen.x<b_posX+(wide)&&ig.input.mouse.y+ig.game.screen.y>b_posY&&ig.input.mouse.y+ig.game.screen.y<b_posY+height)},});MyLoader=ig.Loader.extend({draw:function(){ig.system.resize(240,320,2)}});if(ig.ua.mobile){ig.Sound.enabled=true;var canvas=document.getElementById('canvas');window.innerHeight.limit(1740,1800);if(window.innerHeight>1800)window.innerHeight=1800;canvas.style.width=window.innerWidth+'px';canvas.style.height=window.innerHeight+'px';window.addEventListener('resize',function(){if(!ig.system){return;}
canvas.style.width=window.innerWidth+'px';canvas.style.height=window.innerHeight+'px';},false);ig.main('#canvas',MainMenu,60,240,320,4);}
else{ig.main('#canvas',MainMenu,60,240,320,2);}});